!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):e.mobiscroll=t(e.jQuery)}(this,function(e){"use strict";function t(e,t,a){var s=e;return"object"===("undefined"==typeof t?"undefined":S(t))?e.each(function(){new k.classes[t.component||"Scroller"](this,t)}):("string"==typeof t&&e.each(function(){var e,n=k.instances[this.id];if(n&&n[t]&&(e=n[t].apply(this,Array.prototype.slice.call(a,1)),void 0!==e))return s=e,!1}),s)}function a(){N++,setTimeout(function(){N--},500)}function s(e,t,a){var s=e.originalEvent||e,n=(a?"page":"client")+t;return s.targetTouches&&s.targetTouches[0]?s.targetTouches[0][n]:s.changedTouches&&s.changedTouches[0]?s.changedTouches[0][n]:e[n]}function n(e,t,n,i,o,c){function r(e){f||(i&&e.preventDefault(),f=this,u=s(e,"X"),h=s(e,"Y"),p=!1,b=new Date)}function l(e){f&&!p&&(Math.abs(s(e,"X")-u)>o||Math.abs(s(e,"Y")-h)>o)&&(p=!0)}function d(t){f&&((c&&new Date-b<100||!p)&&(t.preventDefault(),n.call(f,t,e)),f=!1,a())}function m(){f=!1}var u,h,f,p,b,v=k.$,g=v(t);o=o||9,e.settings.tap&&g.on("touchstart.mbsc",r).on("touchcancel.mbsc",m).on("touchmove.mbsc",l).on("touchend.mbsc",d),g.on("click.mbsc",function(t){t.preventDefault(),n.call(this,t,e)})}function i(e){if(N&&!e.tap&&("TEXTAREA"!=e.target.nodeName||"mousedown"!=e.type))return e.stopPropagation(),e.preventDefault(),!1}function o(e){var t;for(t in e)if(void 0!==U[e[t]])return!0;return!1}function c(){var e,t=["Webkit","Moz","O","ms"];for(e in t)if(o([t[e]+"Transform"]))return"-"+t[e].toLowerCase()+"-";return""}function r(e,t,a,s,n,i,o){var c=new Date(e,t,a,s||0,n||0,i||0,o||0);return 23==c.getHours()&&0===(s||0)&&c.setHours(c.getHours()+2),c}function l(e){vt.length||e.show(),vt.push(e)}function d(e){var t=gt.length;gt.push(e),vt.length||(t?gt[0].hide():e.show())}function m(e,t,a,s){return yt({display:t.display||"center",cssClass:"mbsc-alert",okText:t.okText,cancelText:t.cancelText,context:t.context,theme:t.theme,closeOnOverlayTap:!1,onBeforeClose:function(){e.shift()},onBeforeShow:function(){k.activeInstance=null},onHide:function(e,s){a&&a(s._resolve),t.callback&&t.callback(s._resolve),s&&s.destroy(),vt.length?vt[0].show():gt.length&&gt[0].show()}},s)}function u(e){return(e.title?"<h2>"+e.title+"</h2>":"")+"<p>"+(e.message||"")+"</p>"}function h(e,t,a){var s=new pt(e,m(vt,t,a));l(s)}function f(e,t,a){var s=new pt(e,m(vt,t,a,{buttons:["ok","cancel"],onSet:function(){s._resolve=!0}}));s._resolve=!1,l(s)}function p(e,t,a){var s=void 0,n=new pt(e,m(vt,t,a,{buttons:["ok","cancel"],onShow:function(){s=n._markup.find("input")[0],setTimeout(function(){s.focus()},300)},onSet:function(){n._resolve=s.value}}));n._resolve="",l(n)}function b(e,t,a,s,n){var i=void 0,o=new pt(e,m(gt,t,a,{display:"bottom",animate:n,cssClass:s||"mbsc-snackbar",scrollLock:!1,buttons:[],onShow:function(e,a){t.duration!==!1&&(i=setTimeout(function(){a&&a.hide()},t.duration||3e3)),t.button&&a.tap(_t(".mbsc-snackbar-btn",e.target),function(){a.hide(),t.button.action&&t.button.action.call(this)})},onClose:function(){clearTimeout(i)}}));d(o)}function v(e,t,a){b(e,t,a,"mbsc-toast","fade")}function g(e,t,a){var s=void 0;return bt?s=new Promise(function(s){e(t,a,s)}):e(t,a),s}function _(e,t){var a={},s=e.parent(),n=s.find(".mbsc-err-msg"),i=e.attr("data-icon-align")||"left",o=e.attr("data-icon");wt('<span class="mbsc-input-wrap"></span>').insertAfter(e).append(e),n&&s.find(".mbsc-input-wrap").append(n),o&&(o.indexOf("{")!==-1?a=JSON.parse(o):a[i]=o),(o||t)&&(wt.extend(a,t),s.addClass((a.right?"mbsc-ic-right ":"")+(a.left?" mbsc-ic-left":"")).find(".mbsc-input-wrap").append(a.left?'<span class="mbsc-input-ic mbsc-left-ic mbsc-ic mbsc-ic-'+a.left+'"></span>':"").append(a.right?'<span class="mbsc-input-ic mbsc-right-ic mbsc-ic mbsc-ic-'+a.right+'"></span>':""))}function y(e,t){var a={},s=t[0],i=t.parent(),o=t.attr("data-password-toggle"),c=t.attr("data-icon-show")||"eye",r=t.attr("data-icon-hide")||"eye-blocked";o&&(a.right="password"==s.type?c:r),_(t,a),o&&n(e,i.find(".mbsc-right-ic").addClass("mbsc-input-toggle"),function(){"text"==s.type?(s.type="password",wt(this).addClass("mbsc-ic-"+c).removeClass("mbsc-ic-"+r)):(s.type="text",wt(this).removeClass("mbsc-ic-"+c).addClass("mbsc-ic-"+r))})}function w(e,t){"button"!=t&&"submit"!=t&&"segmented"!=t&&(e.addClass("mbsc-control-w").find("label").addClass("mbsc-label"),e.contents().filter(function(){return 3==this.nodeType&&this.nodeValue&&/\S/.test(this.nodeValue)}).each(function(){wt('<span class="mbsc-label"></span>').insertAfter(this).append(this)}))}function x(e){var t=e[0],a=e.attr("data-role"),s=e.attr("type")||t.nodeName.toLowerCase();return/(switch|range|segmented|stepper)/.test(a)&&(s=a),s}function C(e){var t=k.themes.form[e];return t&&t.addRipple?t:null}function T(){clearTimeout(Wt),Wt=setTimeout(function(){It("textarea.mbsc-control").each(function(){D(this)})},100)}function D(e){var t=void 0,a=void 0,s=void 0,n=It(e).attr("rows")||6;e.offsetHeight&&(e.style.height="",s=e.scrollHeight-e.offsetHeight,t=e.offsetHeight+(s>0?s:0),a=Math.round(t/24),a>n?(e.scrollTop=t,t=24*n+(t-24*a),It(e).addClass("mbsc-textarea-scroll")):It(e).removeClass("mbsc-textarea-scroll"),t&&(e.style.height=t+"px"))}function M(e){var t=It(e);if(!t.hasClass("mbsc-textarea-scroll")){var a=e.scrollHeight-e.offsetHeight,s=e.offsetHeight+a;e.scrollTop=0,e.style.height=s+"px"}}e="default"in e?e.default:e;var k=k||{},S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Y=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),P=function e(t,a,s){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,s)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(s)},$=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},A=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},H=e.extend;k.presetShort=function(e,a,s){k.components[e]=function(n){return t(this,H(n,{component:a,preset:s===!1?void 0:e}),arguments)}},k.$=e,e.mobiscroll=k,e.fn.mobiscroll=function(e){return H(this,k.components),t(this,e,arguments)};var E,O,I=[],F=navigator.userAgent,W=F.match(/Android|iPhone|iPad|iPod|Windows Phone|Windows|MSIE/i);/Android/i.test(W)?(E="android",O=navigator.userAgent.match(/Android\s+([\d\.]+)/i),O&&(I=O[0].replace("Android ","").split("."))):/iPhone|iPad|iPod/i.test(W)?(E="ios",O=navigator.userAgent.match(/OS\s+([\d\_]+)/i),O&&(I=O[0].replace(/_/g,".").replace("OS ","").split("."))):/Windows Phone/i.test(W)?E="wp":/Windows|MSIE/i.test(W)&&(E="windows");var L={name:E,majorVersion:I[0],minorVersion:I[1]},N=0;["mouseover","mousedown","mouseup","click"].forEach(function(e){document.addEventListener(e,i,!0)}),"android"==L.name&&L.majorVersion<5&&document.addEventListener("change",function(e){N&&"checkbox"==e.target.type&&!e.target.mbscChange&&(e.stopPropagation(),e.preventDefault()),delete e.target.mbscChange},!0);var j,X=function(){},R=k.$,q=+new Date,B={},z=R.extend,U=document.createElement("modernizr").style,G=c(),J=G.replace(/^\-/,"").replace(/\-$/,"").replace("moz","Moz"),Z=void 0!==U.animation?"animationend":"webkitAnimationEnd";j=z(k,{$:R,version:"3.2.0",util:{prefix:G,jsPrefix:J,animEnd:Z,preventClick:a,testTouch:function(e,t){if("touchstart"==e.type)R(t).attr("data-touch","1");else if(R(t).attr("data-touch"))return R(t).removeAttr("data-touch"),!1;return!0},objectToArray:function(e){var t,a=[];for(t in e)a.push(e[t]);return a},arrayToObject:function(e){var t,a={};if(e)for(t=0;t<e.length;t++)a[e[t]]=e[t];return a},isNumeric:function(e){return e-parseFloat(e)>=0},isString:function(e){return"string"==typeof e},getCoord:s,getPosition:function(e,t){var a,s,n=getComputedStyle(e[0]);return R.each(["t","webkitT","MozT","OT","msT"],function(e,t){if(void 0!==n[t+"ransform"])return a=n[t+"ransform"],!1}),a=a.split(")")[0].split(", "),s=t?a[13]||a[5]:a[12]||a[4]},constrain:function(e,t,a){return Math.max(t,Math.min(e,a))},vibrate:function(e){"vibrate"in navigator&&navigator.vibrate(e||50)},throttle:function(e,t){var a,s;return t=t||100,function(){var n=this,i=+new Date,o=arguments;a&&i<a+t?(clearTimeout(s),s=setTimeout(function(){a=i,e.apply(n,o)},t)):(a=i,e.apply(n,o))}}},autoTheme:"mobiscroll",presets:{scroller:{},numpad:{},listview:{},menustrip:{}},themes:{form:{},page:{},frame:{},scroller:{},listview:{},menustrip:{},progress:{}},platform:L,i18n:{},instances:B,classes:{},components:{},settings:{},setDefaults:function(e){z(this.settings,e)},customTheme:function(e,t){var a,s=k.themes,n=["frame","scroller","listview","menustrip","form","progress"];for(a=0;a<n.length;a++)s[n[a]][e]=k.$.extend({},s[n[a]][t],{baseTheme:t})}}),j.presetShort=j.presetShort||function(){},j.classes.Base=function(e,t){function a(){R(e).addClass("mbsc-comp"),e.id?B[e.id]&&B[e.id].destroy():e.id="mobiscroll"+ ++q,B[e.id]=m,m.__ready=!0}var s,i,o,c,r,l,d,m=this;m.settings={},m._init=X,m._destroy=X,m._processSettings=X,m.init=function(a){var n;for(n in m.settings)delete m.settings[n];o=m.settings,z(t,a),m._hasDef&&(d=j.settings),z(o,m._defaults,d,t),m._hasTheme&&(r=o.theme,"auto"!=r&&r||(r=j.autoTheme),"default"==r&&(r="mobiscroll"),t.theme=r,c=j.themes[m._class]?j.themes[m._class][r]:{}),m._hasLang&&(s=j.i18n[o.lang]),m._hasTheme&&l("onThemeLoad",{lang:s,settings:t}),z(o,c,s,d,t),m._processSettings(),m._hasPreset&&(i=j.presets[m._class][o.preset],i&&(i=i.call(e,m),z(o,i,t))),m._init(a),l("onInit")},m.destroy=function(){m&&(m._destroy(),l("onDestroy"),delete B[e.id],m=null)},m.tap=function(e,t,a,s,i){n(m,e,t,a,s,i)},m.trigger=function(a,s){var n,o,r,l=[d,c,i,t];for(o=0;o<4;o++)r=l[o],r&&r[a]&&(n=r[a].call(e,s||{},m));return n},m.option=function(e,t){var a={};"object"===("undefined"==typeof e?"undefined":S(e))?a=e:a[e]=t,m.init(a)},m.getInst=function(){return m},t=t||{},l=m.trigger,m.__ready||a()};var K=k.$,Q={defaults:{shortYearCutoff:"+10",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayNames:["日","一","二","三","四","五","六"],dayNamesShort:["日","一","二","三","四","五","六"],dayNamesMin:["日","一","二","三","四","五","六"],amText:"am",pmText:"pm",getYear:function(e){return e.getFullYear()},getMonth:function(e){return e.getMonth()},getDay:function(e){return e.getDate()},getDate:r,getMaxDayOfMonth:function(e,t){return 32-new Date(e,t,32,12).getDate()},getWeekNumber:function(e){e=new Date(e),e.setHours(0,0,0),e.setDate(e.getDate()+4-(e.getDay()||7));var t=new Date(e.getFullYear(),0,1);return Math.ceil(((e-t)/864e5+1)/7)}},adjustedDate:r,formatDate:function(e,t,a){if(!t)return null;var s,n,i=K.extend({},Q.defaults,a),o=function(t){for(var a=0;s+1<e.length&&e.charAt(s+1)==t;)a++,s++;return a},c=function(e,t,a){var s=""+t;if(o(e))for(;s.length<a;)s="0"+s;return s},r=function(e,t,a,s){return o(e)?s[t]:a[t]},l="",d=!1;for(s=0;s<e.length;s++)if(d)"'"!=e.charAt(s)||o("'")?l+=e.charAt(s):d=!1;else switch(e.charAt(s)){case"d":l+=c("d",i.getDay(t),2);break;case"D":l+=r("D",t.getDay(),i.dayNamesShort,i.dayNames);break;case"o":l+=c("o",(t.getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5,3);break;case"m":l+=c("m",i.getMonth(t)+1,2);break;case"M":l+=r("M",i.getMonth(t),i.monthNamesShort,i.monthNames);break;case"y":n=i.getYear(t),l+=o("y")?n:(n%100<10?"0":"")+n%100;break;case"h":var m=t.getHours();l+=c("h",m>12?m-12:0===m?12:m,2);break;case"H":l+=c("H",t.getHours(),2);break;case"i":l+=c("i",t.getMinutes(),2);break;case"s":l+=c("s",t.getSeconds(),2);break;case"a":l+=t.getHours()>11?i.pmText:i.amText;break;case"A":l+=t.getHours()>11?i.pmText.toUpperCase():i.amText.toUpperCase();break;case"'":o("'")?l+="'":d=!0;break;default:l+=e.charAt(s)}return l},parseDate:function(e,t,a){var s=K.extend({},Q.defaults,a),n=s.defaultValue&&s.defaultValue.getTime?s.defaultValue:new Date;if(!e||!t)return n;if(t.getTime)return t;t="object"==("undefined"==typeof t?"undefined":S(t))?t.toString():t+"";var i,o=s.shortYearCutoff,c=s.getYear(n),r=s.getMonth(n)+1,l=s.getDay(n),d=-1,m=n.getHours(),u=n.getMinutes(),h=0,f=-1,p=!1,b=function(t){var a=i+1<e.length&&e.charAt(i+1)==t;return a&&i++,a},v=function(e){b(e);var a="@"==e?14:"!"==e?20:"y"==e?4:"o"==e?3:2,s=new RegExp("^\\d{1,"+a+"}"),n=t.substr(y).match(s);return n?(y+=n[0].length,parseInt(n[0],10)):0},g=function(e,a,s){var n,i=b(e)?s:a;for(n=0;n<i.length;n++)if(t.substr(y,i[n].length).toLowerCase()==i[n].toLowerCase())return y+=i[n].length,n+1;return 0},_=function(){y++},y=0;for(i=0;i<e.length;i++)if(p)"'"!=e.charAt(i)||b("'")?_():p=!1;else switch(e.charAt(i)){case"d":l=v("d");break;case"D":g("D",s.dayNamesShort,s.dayNames);break;case"o":d=v("o");break;case"m":r=v("m");break;case"M":r=g("M",s.monthNamesShort,s.monthNames);break;case"y":c=v("y");break;case"H":m=v("H");break;case"h":m=v("h");break;case"i":u=v("i");break;case"s":h=v("s");break;case"a":f=g("a",[s.amText,s.pmText],[s.amText,s.pmText])-1;break;case"A":f=g("A",[s.amText,s.pmText],[s.amText,s.pmText])-1;break;case"'":b("'")?_():p=!0;break;default:_()}if(c<100&&(c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c<=("string"!=typeof o?o:(new Date).getFullYear()%100+parseInt(o,10))?0:-100)),d>-1)for(r=1,l=d;;){var w=32-new Date(c,r-1,32,12).getDate();if(l<=w)break;r++,l-=w}m=f==-1?m:f&&m<12?m+12:f||12!=m?m:0;var x=s.getDate(c,r-1,l,m,u,h);return s.getYear(x)!=c||s.getMonth(x)+1!=r||s.getDay(x)!=l?n:x}};k.util.datetime=Q;var ee,te,ae=k.$,se=k.platform,ne=k.util,ie=k.classes,oe=k.themes,ce=ne.constrain,re=ne.isString,le=ne.getCoord,de=ne.animEnd,me=/(iphone|ipod)/i.test(navigator.userAgent)&&se.majorVersion>=7,ue="ios"==se.name&&8==se.majorVersion,he=function(){},fe=function(e){e.preventDefault()},pe=function(e,t,a){function s(e){D&&D.removeClass("mbsc-fr-btn-a"),D=ae(this),D.hasClass("mbsc-fr-btn-d")||D.hasClass("mbsc-fr-btn-nhl")||D.addClass("mbsc-fr-btn-a"),"mousedown"===e.type?ae(document).on("mouseup",n):"pointerdown"===e.type&&ae(document).on("pointerup",n)}function n(e){D&&(D.removeClass("mbsc-fr-btn-a"),D=null),"mouseup"===e.type?ae(document).off("mouseup",n):"pointerup"===e.type&&ae(document).off("pointerup",n)}function i(e){13==e.keyCode?G.select():27==e.keyCode&&G.cancel()}function o(e){e||I.focus(),G.ariaMessage(N.ariaMessage)}function c(e){var t=ee,a=N.focusOnClose;G._markupRemove(),g.remove(),Y&&(M.mbscModals--,N.scrollLock&&M.mbscLock--,M.mbscLock||v.removeClass("mbsc-fr-lock"),M.mbscModals||(v.removeClass("mbsc-fr-lock-ios mbsc-fr-lock-ctx"),O&&(p.css({top:"",left:""}),x.scrollLeft(j),x.scrollTop(R)),e||(t||(t=J),setTimeout(function(){void 0===a||a===!0?(te=!0,t[0].focus()):a&&ae(a)[0].focus()},200)))),ee=null,G._isVisible=!1,P=!1,B("onHide")}function r(e){clearTimeout(K[e.type]),K[e.type]=setTimeout(function(){var t,a="scroll"==e.type;a&&!X||(G.position(!a),"orientationchange"==e.type&&(F.style.display="none",t=F.offsetHeight,F.style.display=""))},200)}function l(e){e.target.nodeType&&!F.contains(e.target)&&F.focus()}function d(e,t){e&&e(),G.show()!==!1&&(ee=t,setTimeout(function(){te=!1},300))}function m(){G._fillValue(),B("onSet",{valueText:G._value})}function u(){B("onCancel",{valueText:G._value})}function h(){G.setVal(null,!0)}var f,p,b,v,g,_,y,w,x,C,T,D,M,S,V,Y,P,$,A,H,E,O,I,F,W,L,N,j,X,R,q,B,z,U,G=this,J=ae(e),Z=[],K={};ie.Base.call(this,e,t,!0),G.position=function(e){var t,a,s,n,i,o,c,r,l,d,m,u,h,f,b,v,_={},T=0,D=0,S=0,O=0;!L&&P&&(G._position(g),u=$.offsetHeight,h=$.offsetWidth,z===h&&U===u&&e||(G._isFullScreen||/top|bottom/.test(N.display)?w.width(h):C.width(""),B("onPosition",{target:$,windowWidth:h,windowHeight:u})!==!1&&Y&&(ae(".mbsc-comp",g).each(function(){var e=k.instances[this.id];e&&e!==G&&e.position&&e.position()}),!G._isFullScreen&&/center|bubble/.test(N.display)&&(ae(".mbsc-w-p",g).each(function(){f=this.getBoundingClientRect().width,O+=f,S=f>S?f:S}),C.css({width:G._isLiquid?Math.min(N.maxPopupWidth,h-16):Math.ceil(O>h?S:O),"white-space":O>h?"":"nowrap"})),A=F.offsetWidth,H=F.offsetHeight,X=H<=u&&A<=h,E&&(T=x.scrollLeft(),D=x.scrollTop()),"center"==N.display?(v=Math.max(0,T+(h-A)/2),b=Math.max(0,D+(u-H)/2)):"bubble"==N.display?(t=void 0===N.anchor?J:ae(N.anchor),c=ae(".mbsc-fr-arr-i",g)[0],n=t.offset(),i=n.top+(V?D-p.offset().top:0),o=n.left+(V?T-p.offset().left:0),a=t[0].offsetWidth,s=t[0].offsetHeight,r=c.offsetWidth,l=c.offsetHeight,v=ce(o-(A-a)/2,T+8,T+h-A-8),b=i-H-l/2,b<D||i>D+u?(w.removeClass("mbsc-fr-bubble-top").addClass("mbsc-fr-bubble-bottom"),b=i+s+l/2):w.removeClass("mbsc-fr-bubble-bottom").addClass("mbsc-fr-bubble-top"),ae(".mbsc-fr-arr",g).css({left:ce(o+a/2-(v+(A-r)/2),0,r)}),X=b>D&&v>T&&b+H<=D+u&&v+A<=T+h):(v=T,b="top"==N.display?D:Math.max(0,D+u-H)),E&&(d=Math.max(b+H,V?M.scrollHeight:ae(document).height()),m=Math.max(v+A,V?M.scrollWidth:ae(document).width()),y.css({width:m,height:d}),N.scroll&&"bubble"==N.display&&(b+H+8>D+u||i>D+u||i+s<D)&&(L=!0,setTimeout(function(){L=!1},300),x.scrollTop(Math.min(i,b+H-u+8,d-u)))),_.top=Math.floor(b),_.left=Math.floor(v),w.css(_),z=h,U=u)))},G.attachShow=function(e,t){var a,s=ae(e),n=s.prop("readonly");if("inline"!==N.display){if((N.showOnFocus||N.showOnTap)&&s.is("input,select")&&(s.prop("readonly",!0).on("mousedown.mbsc",function(e){e.preventDefault()}).on("focus.mbsc",function(){G._isVisible&&this.blur()}),a=ae('label[for="'+s.attr("id")+'"]'),a.length||(a=s.closest("label"))),s.is("select"))return;N.showOnFocus&&s.on("focus.mbsc",function(){te||d(t,s)}),N.showOnTap&&(s.on("keydown.mbsc",function(e){32!=e.keyCode&&13!=e.keyCode||(e.preventDefault(),e.stopPropagation(),d(t,s))}),G.tap(s,function(){d(t,s)}),a&&a.length&&G.tap(a,function(){d(t,s)})),Z.push({readOnly:n,el:s,lbl:a})}},G.select=function(){Y?G.hide(!1,"set",!1,m):m()},G.cancel=function(){Y?G.hide(!1,"cancel",!1,u):u()},G.clear=function(){G._clearValue(),B("onClear"),Y&&G._isVisible&&!G.live?G.hide(!1,"clear",!1,h):h()},G.enable=function(){N.disabled=!1,G._isInput&&J.prop("disabled",!1)},G.disable=function(){N.disabled=!0,G._isInput&&J.prop("disabled",!0)},G.show=function(e,t){function a(){g.off(de,a).removeClass("mbsc-anim-in mbsc-anim-trans mbsc-anim-trans-"+S).find(".mbsc-fr-popup").removeClass("mbsc-anim-"+S),o(t)}var c,d;if(!N.disabled&&!G._isVisible){if(G._readValue(),B("onBeforeShow")===!1)return!1;if(S=N.animate,T=N.buttons||[],E=V||"bubble"==N.display,O=me&&!E&&N.scrollLock,c=T.length>0,S!==!1&&("top"==N.display?S=S||"slidedown":"bottom"==N.display?S=S||"slideup":"center"!=N.display&&"bubble"!=N.display||(S=S||"pop")),Y&&(R=Math.max(0,x.scrollTop()),j=Math.max(0,x.scrollLeft()),z=0,U=0,O&&!v.hasClass("mbsc-fr-lock-ios")&&p.css({top:-R+"px",left:-j+"px"}),v.addClass((N.scrollLock?"mbsc-fr-lock":"")+(O?" mbsc-fr-lock-ios":"")+(V?" mbsc-fr-lock-ctx":"")),ae(document.activeElement).is("input,textarea")&&document.activeElement.blur(),k.activeInstance&&k.activeInstance.hide(),k.activeInstance=G,M.mbscModals=M.mbscModals||0,M.mbscLock=M.mbscLock||0,M.mbscModals++,N.scrollLock&&M.mbscLock++),d='<div lang="'+N.lang+'" class="mbsc-fr mbsc-no-touch mbsc-'+N.theme+(N.baseTheme?" mbsc-"+N.baseTheme:"")+" mbsc-fr-"+N.display+" "+(N.cssClass||"")+" "+(N.compClass||"")+(G._isLiquid?" mbsc-fr-liq":"")+(O?" mbsc-platform-ios":"")+(c?T.length>=3?" mbsc-fr-btn-block ":"":" mbsc-fr-nobtn")+'">'+(Y?'<div class="mbsc-fr-persp"><div class="mbsc-fr-overlay"></div><div role="dialog" tabindex="-1" class="mbsc-fr-scroll">':"")+'<div class="mbsc-fr-popup'+(N.rtl?" mbsc-rtl":" mbsc-ltr")+(N.headerText?" mbsc-fr-has-hdr":"")+'">'+("bubble"===N.display?'<div class="mbsc-fr-arr-w"><div class="mbsc-fr-arr-i"><div class="mbsc-fr-arr"></div></div></div>':"")+'<div class="mbsc-fr-w"><div aria-live="assertive" class="mbsc-fr-aria mbsc-fr-hdn"></div>'+(N.headerText?'<div class="mbsc-fr-hdr">'+(re(N.headerText)?N.headerText:"")+"</div>":"")+'<div class="mbsc-fr-c">',d+=G._generateContent(),d+="</div>",c&&(d+='<div class="mbsc-fr-btn-cont">',ae.each(T,function(e,t){t=re(t)?G.buttons[t]:t,"set"===t.handler&&(t.parentClass="mbsc-fr-btn-s"),"cancel"===t.handler&&(t.parentClass="mbsc-fr-btn-c"),d+="<div"+(N.btnWidth?' style="width:'+100/T.length+'%"':"")+' class="mbsc-fr-btn-w '+(t.parentClass||"")+'"><div tabindex="0" role="button" class="mbsc-fr-btn'+e+" mbsc-fr-btn-e "+(void 0===t.cssClass?N.btnClass:t.cssClass)+(t.icon?" mbsc-ic mbsc-ic-"+t.icon:"")+'">'+(t.text||"")+"</div></div>"}),d+="</div>"),d+="</div></div></div></div>"+(Y?"</div></div>":""),g=ae(d),y=ae(".mbsc-fr-persp",g),_=ae(".mbsc-fr-scroll",g),C=ae(".mbsc-fr-w",g),b=ae(".mbsc-fr-hdr",g),w=ae(".mbsc-fr-popup",g),f=ae(".mbsc-fr-aria",g),$=g[0],I=_[0],F=w[0],G._markup=g,G._header=b,G._isVisible=!0,W="orientationchange resize",G._markupReady(g),B("onMarkupReady",{target:$}),Y){if(ae(window).on("keydown",i),N.scrollLock&&g.on("touchmove mousewheel wheel",function(e){X&&e.preventDefault()}),N.focusTrap&&x.on("focusin",l),N.closeOnOverlayTap){var m,u,h,D;_.on("touchstart mousedown",function(e){u||e.target!=_[0]||(u=!0,m=!1,h=le(e,"X"),D=le(e,"Y"))}).on("touchmove mousemove",function(e){u&&!m&&(Math.abs(le(e,"X")-h)>9||Math.abs(le(e,"Y")-D)>9)&&(m=!0)}).on("touchcancel",function(){u=!1}).on("touchend touchcancel mouseup",function(e){u&&!m&&(G.cancel(),"mouseup"!=e.type&&ne.preventClick()),u=!1})}E&&(W+=" scroll")}setTimeout(function(){if(Y)g.appendTo(p);else if(J.is("div")&&!G._hasContent)J.empty().append(g);else if(J.hasClass("mbsc-control")){var i=J.closest(".mbsc-control-w");g.insertAfter(i),i.hasClass("mbsc-select")&&i.addClass("mbsc-select-inline")}else g.insertAfter(J);P=!0,G._markupInserted(g),B("onMarkupInserted",{target:$}),g.on("selectstart mousedown",fe).on("click",".mbsc-fr-btn-e",fe).on("keydown",".mbsc-fr-btn-e",function(e){32==e.keyCode&&(e.preventDefault(),e.stopPropagation(),this.click())}).on("keydown",function(e){if(32==e.keyCode)e.preventDefault();else if(9==e.keyCode&&Y&&N.focusTrap){var t=g.find('[tabindex="0"]').filter(function(){return this.offsetWidth>0||this.offsetHeight>0}),a=t.index(ae(":focus",g)),s=t.length-1,n=0;e.shiftKey&&(s=0,n=-1),a===s&&(t.eq(n)[0].focus(),e.preventDefault())}}).on("touchstart mousedown pointerdown",".mbsc-fr-btn-e",s).on("touchend",".mbsc-fr-btn-e",n),ae("input,select,textarea",g).on("selectstart mousedown",function(e){e.stopPropagation()}).on("keydown",function(e){32==e.keyCode&&e.stopPropagation()}),$.addEventListener("touchstart",function(){q||(q=!0,p.find(".mbsc-no-touch").removeClass("mbsc-no-touch"))},!0),ae.each(T,function(e,t){G.tap(ae(".mbsc-fr-btn"+e,g),function(e){t=re(t)?G.buttons[t]:t,(re(t.handler)?G.handlers[t.handler]:t.handler).call(this,e,G)},!0)}),G._attachEvents(g),G.position(),x.on(W,r),Y&&(S&&!e?g.addClass("mbsc-anim-in mbsc-anim-trans mbsc-anim-trans-"+S).on(de,a).find(".mbsc-fr-popup").addClass("mbsc-anim-"+S):o(t)),B("onShow",{target:$,valueText:G._tempValue})},O?100:0)}},G.hide=function(e,t,a,s){function n(){g.off(de,n),c(e)}return!(!G._isVisible||!a&&!G._isValid&&"set"==t||!a&&B("onBeforeClose",{valueText:G._tempValue,button:t})===!1)&&(Y&&(ae(document.activeElement).is("input,textarea")&&F.contains(document.activeElement)&&document.activeElement.blur(),ae(window).off("keydown",i),delete k.activeInstance),g&&(Y&&S&&!e?g.addClass("mbsc-anim-out mbsc-anim-trans mbsc-anim-trans-"+S).on(de,n).find(".mbsc-fr-popup").addClass("mbsc-anim-"+S):c(e),G._detachEvents(g),x.off(W,r).off("focusin",l)),s&&s(),void B("onClose",{valueText:G._value}))},G.ariaMessage=function(e){f.html(""),setTimeout(function(){f.html(e)},100)},G.isVisible=function(){return G._isVisible},G.setVal=he,G.getVal=he,G._generateContent=he,G._attachEvents=he,G._detachEvents=he,G._readValue=he,G._clearValue=he,G._fillValue=he,G._markupReady=he,G._markupInserted=he,G._markupRemove=he,G._position=he,G.__processSettings=he,G.__init=he,G.__destroy=he,G._destroy=function(){G.hide(!0,!1,!0),J.off(".mbsc"),ae.each(Z,function(e,t){t.el.off(".mbsc").prop("readonly",t.readOnly),t.lbl&&t.lbl.off(".mbsc")}),G.__destroy()},G._processSettings=function(){var e,t;for(G.__processSettings(),N.buttons=N.buttons||("inline"!==N.display?["set","cancel"]:[]),N.headerText=void 0===N.headerText?"inline"!==N.display&&"{value}":N.headerText,T=N.buttons||[],Y="inline"!==N.display,V="body"!=N.context,p=ae(N.context),v=V?p:ae("body,html"),M=p[0],G._window=x=ae(V?N.context:window),G.live=!0,t=0;t<T.length;t++)e=T[t],"ok"!=e&&"set"!=e&&"set"!=e.handler||(G.live=!1);G.buttons.set={text:N.setText,icon:N.setIcon,handler:"set"},G.buttons.cancel={text:N.cancelText,icon:N.cancelIcon,handler:"cancel"},G.buttons.close={text:N.closeText,icon:N.closeIcon,handler:"cancel"},G.buttons.clear={text:N.clearText,icon:N.clearIcon,handler:"clear"},G._isInput=J.is("input")},G._init=function(){G._isVisible&&G.hide(!0,!1,!0),J.off(".mbsc"),G.__init(),G._isLiquid="liquid"==N.layout,Y?(G._readValue(),G._hasContent||G.attachShow(J)):G.show(),J.on("change.mbsc",function(){G._preventChange||G.setVal(J.val(),!0,!1),G._preventChange=!1})},G.buttons={},G.handlers={set:G.select,cancel:G.cancel,clear:G.clear},G._value=null,G._isValid=!0,G._isVisible=!1,N=G.settings,B=G.trigger,a||G.init(t)};pe.prototype._defaults={lang:"en",setText:"Set",selectedText:"{count} selected",closeText:"Close",cancelText:"取消",clearText:"Clear",context:"body",maxPopupWidth:600,disabled:!1,closeOnOverlayTap:!0,showOnFocus:!1,showOnTap:!0,display:"center",scroll:!0,scrollLock:!0,tap:!0,btnClass:"mbsc-fr-btn",btnWidth:!0,focusTrap:!0,focusOnClose:!ue},ie.Frame=pe,oe.frame.mobiscroll={headerText:!1,btnWidth:!1},oe.scroller.mobiscroll=ae.extend({},oe.frame.mobiscroll,{rows:5,showLabel:!1,selectedLineBorder:1,weekDays:"min",checkIcon:"ion-ios7-checkmark-empty",btnPlusClass:"mbsc-ic mbsc-ic-arrow-down5",btnMinusClass:"mbsc-ic mbsc-ic-arrow-up5",btnCalPrevClass:"mbsc-ic mbsc-ic-arrow-left5",btnCalNextClass:"mbsc-ic mbsc-ic-arrow-right5"}),ae(window).on("focus",function(){ee&&(te=!0)});var be=k.$,ve=k.classes,ge=k.util,_e=ge.constrain,ye=ge.jsPrefix,we=ge.prefix,xe=ge.getCoord,Ce=ge.getPosition,Te=ge.testTouch,De=ge.isNumeric,Me=ge.isString,ke=/(iphone|ipod|ipad)/i.test(navigator.userAgent),Se=function(){},Ve=window.requestAnimationFrame||function(e){e()},Ye=window.cancelAnimationFrame||Se,Pe=function(e,t,a){function s(e){q("onStart",{domEvent:e}),Z.stopProp&&e.stopPropagation(),(Z.prevDef||"mousedown"==e.type)&&e.preventDefault(),Z.readonly||Z.lock&&S||Te(e,this)&&!k&&(d&&d.removeClass("mbsc-btn-a"),x=!1,S||(d=be(e.target).closest(".mbsc-btn-e",this),d.length&&!d.hasClass("mbsc-btn-d")&&(x=!0,m=setTimeout(function(){d.addClass("mbsc-btn-a")},100))),k=!0,$=!1,V=!1,U.scrolled=S,W=xe(e,"X"),L=xe(e,"Y"),_=C=W,h=0,f=0,p=0,F=new Date,I=+Ce(j,B)||0,S&&l(I,ke?0:1),"mousedown"===e.type&&be(document).on("mousemove",n).on("mouseup",o))}function n(e){k&&(Z.stopProp&&e.stopPropagation(),_=xe(e,"X"),y=xe(e,"Y"),h=_-W,f=y-L,p=B?f:h,x&&(Math.abs(f)>Z.thresholdY||Math.abs(h)>Z.thresholdX)&&(clearTimeout(m),d.removeClass("mbsc-btn-a"),x=!1),(U.scrolled||!V&&Math.abs(p)>R)&&($||q("onGestureStart",w),U.scrolled=$=!0,P||(P=!0,Y=Ve(i))),B||Z.scrollLock?e.preventDefault():U.scrolled?e.preventDefault():Math.abs(f)>7&&(V=!0,U.scrolled=!0,K.trigger("touchend")))}function i(){D&&(p=_e(p,-E*D,E*D)),l(_e(I+p,M-g,T+g)),P=!1}function o(e){if(k){var t,a=new Date-F;Z.stopProp&&e.stopPropagation(),Ye(Y),P=!1,!V&&U.scrolled&&(Z.momentum&&a<300&&(t=p/a,p=Math.max(Math.abs(p),t*t/Z.speedUnit)*(p<0?-1:1)),r(p)),x&&(clearTimeout(m),d.addClass("mbsc-btn-a"),setTimeout(function(){d.removeClass("mbsc-btn-a")},100),V||U.scrolled||q("onBtnTap",{target:d[0]})),"mouseup"==e.type&&be(document).off("mousemove",n).off("mouseup",o),k=!1}}function c(e){if(e=e.originalEvent||e,p=B?e.deltaY||e.wheelDelta||e.detail:e.deltaX,q("onStart",{domEvent:e}),Z.stopProp&&e.stopPropagation(),p){if(e.preventDefault(),e.deltaMode&&1==e.deltaMode&&(p*=5),p=_e(-p,-20,20),I=z,Z.readonly||I+p<M||I+p>T)return;$||(w={posX:B?0:z,posY:B?z:0,originX:B?0:I,originY:B?I:0,direction:p>0?B?270:360:B?90:180},q("onGestureStart",w)),P||(P=!0,Y=Ve(i)),$=!0,clearTimeout(A),A=setTimeout(function(){Ye(Y),P=!1,$=!1,r(p)},200)}}function r(e){var t,a,s;if(D&&(e=_e(e,-E*D,E*D)),s=_e(Math.round((I+e)/E)*E,M,T),G=Math.round(s/E),O){if(e<0){for(t=O.length-1;t>=0;t--)if(Math.abs(s)+u>=O[t].breakpoint){G=t,J=2,s=O[t].snap2;break}}else if(e>=0)for(t=0;t<O.length;t++)if(Math.abs(s)<=O[t].breakpoint){G=t,J=1,s=O[t].snap1;break}s=_e(s,M,T)}a=Z.time||(z<M||z>T?1e3:Math.max(1e3,Math.abs(s-z)*Z.timeUnit)),w.destinationX=B?0:s,w.destinationY=B?s:0,w.duration=a,w.transitionTiming=v,q("onGestureEnd",w),l(s,a)}function l(e,t,a,s){var n=e!=z,i=t>1,o=function(){clearInterval(H),clearTimeout(X),S=!1,z=e,w.posX=B?0:e,w.posY=B?e:0,n&&q("onMove",w),i&&q("onAnimationEnd",w),s&&s()};w={posX:B?0:z,posY:B?z:0,originX:B?0:I,originY:B?I:0,direction:e-z>0?B?270:360:B?90:180},z=e,i&&(w.destinationX=B?0:e,w.destinationY=B?e:0,w.duration=t,w.transitionTiming=v,q("onAnimationStart",w)),N[ye+"Transition"]=t?we+"transform "+Math.round(t)+"ms "+v:"",N[ye+"Transform"]="translate3d("+(B?"0,"+e+"px,":e+"px,0,")+"0)",!n&&!S||!t||t<=1?o():t&&(S=!a,clearInterval(H),H=setInterval(function(){var t=+Ce(j,B)||0;w.posX=B?0:t,w.posY=B?t:0,q("onMove",w),Math.abs(t-e)<2&&o()},100),clearTimeout(X),X=setTimeout(function(){o()},t)),Z.sync&&Z.sync(e,t,v)}var d,m,u,h,f,p,b,v,g,_,y,w,x,C,T,D,M,k,S,V,Y,P,$,A,H,E,O,I,F,W,L,N,j,X,R,q,B,z,U=this,G=0,J=1,Z=t,K=be(e);ve.Base.call(this,e,t,!0),U.scrolled=!1,U.scroll=function(t,a,s,n){t=De(t)?Math.round(t/E)*E:Math.ceil((be(t,e).length?Math.round(j.offset()[b]-be(t,e).offset()[b]):z)/E)*E,t=_e(t,M,T),G=Math.round(t/E),I=z,l(t,a,s,n)},U.refresh=function(e){var t;u=void 0===Z.contSize?B?K.height():K.width():Z.contSize,M=void 0===Z.minScroll?Math.min(0,B?u-j.height():u-j.width()):Z.minScroll,T=void 0===Z.maxScroll?0:Z.maxScroll,O=null,!B&&Z.rtl&&(t=T,T=-M,M=-t),Me(Z.snap)&&(O=[],j.find(Z.snap).each(function(){var e=B?this.offsetTop:this.offsetLeft,t=B?this.offsetHeight:this.offsetWidth;O.push({breakpoint:e+t/2,snap1:-e,snap2:u-e-t})})),E=De(Z.snap)?Z.snap:1,D=Z.snap?Z.maxSnapScroll:0,v=Z.easing,g=Z.elastic?De(Z.snap)?E:De(Z.elastic)?Z.elastic:0:0,void 0===z&&(z=Z.initialPos,G=Math.round(z/E)),e||U.scroll(Z.snap?O?O[G]["snap"+J]:G*E:z)},U._processSettings=function(){B="Y"==Z.axis,b=B?"top":"left",j=Z.moveElement||K.children().eq(0),N=j[0].style,R=B?Z.thresholdY:Z.thresholdX},U._init=function(){U.refresh(),K.on("touchstart mousedown",s).on("touchmove",n).on("touchend touchcancel",o),Z.mousewheel&&K.on("wheel mousewheel",c),e.addEventListener&&e.addEventListener("click",function(e){U.scrolled&&(U.scrolled=!1,e.stopPropagation(),e.preventDefault())},!0)},U._destroy=function(){clearInterval(H),K.off("touchstart mousedown",s).off("touchmove",n).off("touchend touchcancel",o).off("wheel mousewheel",c)},Z=U.settings,q=U.trigger,a||U.init(t)};Pe.prototype={_class:"scrollview",_defaults:{speedUnit:.0022,timeUnit:3,initialPos:0,axis:"Y",thresholdX:10,thresholdY:5,easing:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",stopProp:!0,momentum:!0,mousewheel:!0,elastic:!0}},ve.ScrollView=Pe,k.presetShort("scrollview","ScrollView",!1);
var $e=k.$,Ae=$e.extend,He=k.platform,Ee=k.util,Oe=Ee.jsPrefix,Ie=Ee.prefix,Fe=Ee.getCoord,We=Ee.testTouch,Le=window.CSS,Ne=Le&&Le.supports&&Le.supports("(transform-style: preserve-3d)"),je=!Ne||"wp"==He.name||"android"==He.name;k.presetShort("scroller","Scroller",!1);var Xe=function(e,t,a){function s(e){var t=+$e(this).attr("data-index");e.stopPropagation(),"mousedown"===e.type&&e.preventDefault(),We(e,this)&&!v(t)&&(k=$e(this).addClass("mbsc-sc-btn-a"),O=Fe(e,"X"),I=Fe(e,"Y"),H=!0,E=!1,setTimeout(function(){f(t,"inc"==k.attr("data-dir")?1:-1)},100),"mousedown"===e.type&&$e(document).on("mousemove",n).on("mouseup",i))}function n(e){(Math.abs(O-Fe(e,"X"))>7||Math.abs(I-Fe(e,"Y"))>7)&&p(!0)}function i(e){p(),e.preventDefault(),"mouseup"===e.type&&$e(document).off("mousemove",n).off("mouseup",i)}function o(e){var t,a,s=$e(this).attr("data-index");38==e.keyCode?(t=!0,a=-1):40==e.keyCode?(t=!0,a=1):32==e.keyCode&&(t=!0,r(s,q[s]._$markup.find('.mbsc-sc-itm[data-val="'+F[s]+'"]'))),t&&(e.stopPropagation(),e.preventDefault(),a&&!H&&(H=!0,E=!1,f(s,a)))}function c(){p()}function r(e,t){var a=q[e],s=t.attr("data-index"),n=h(a,s),i=G._tempSelected[e],o=Ee.isNumeric(a.multiple)?a.multiple:1/0;X("onItemTap",{target:t[0],index:e,value:n,selected:t.hasClass("mbsc-sc-itm-sel")})!==!1&&(a.multiple&&!a._disabled[n]&&(void 0!==i[n]?(t.removeClass(P).removeAttr("aria-selected"),delete i[n]):(1==o&&(G._tempSelected[e]=i={},a._$markup.find(".mbsc-sc-itm-sel").removeClass(P).removeAttr("aria-selected")),Ee.objectToArray(i).length<o&&(t.addClass(P).attr("aria-selected","true"),i[n]=n))),T(a,e,s,U,!0,!0,a.multiple),!G.live||a.multiple||j.setOnTap!==!0&&!j.setOnTap[e]||setTimeout(function(){G.select()},200))}function l(e,t){return(e._array?e._map[t]:e.getIndex(t,G))||0}function d(e,t){var a=e.data;if(t>=e.min&&t<=e.max)return e._array?e.circular?$e(a).get(t%e._length):a[t]:$e.isFunction(a)?a(t,G):""}function m(e){return $e.isPlainObject(e)?void 0!==e.value?e.value:e.display:e}function u(e){var t=$e.isPlainObject(e)?e.display:e;return void 0===t?"":t}function h(e,t){return m(d(e,t))}function f(e,t){E||b(e,t),H&&(clearInterval(A),A=setInterval(function(){b(e,t)},j.delay))}function p(e){clearInterval(A),E=e,H=!1,k&&k.removeClass("mbsc-sc-btn-a")}function b(e,t){var a=q[e];T(a,e,a._current+t,U,1==t?1:2)}function v(e){return $e.isArray(j.readonly)?j.readonly[e]:j.readonly}function g(e,t,a){var s=e._index-e._batch;return e.data=e.data||[],e.key=void 0!==e.key?e.key:t,e.label=void 0!==e.label?e.label:t,e._map={},e._array=$e.isArray(e.data),e._array&&(e._length=e.data.length,$e.each(e.data,function(t,a){e._map[m(a)]=t})),e.circular=void 0===j.circular?void 0===e.circular?e._array&&e._length>j.rows:e.circular:$e.isArray(j.circular)?j.circular[t]:j.circular,e.min=e._array?e.circular?-(1/0):0:void 0===e.min?-(1/0):e.min,e.max=e._array?e.circular?1/0:e._length-1:void 0===e.max?1/0:e.max,e._nr=t,e._index=l(e,F[t]),e._disabled={},e._batch=0,e._current=e._index,e._first=e._index-z,e._last=e._index+z,e._offset=e._first,a?(e._offset-=e._margin/W+(e._index-s),e._margin+=(e._index-s)*W):e._margin=0,e._refresh=function(t){var a=-(e.min-e._offset+(e.multiple&&!Y?Math.floor(j.rows/2):0))*W,s=Math.min(a,-(e.max-e._offset-(e.multiple&&!Y?Math.floor(j.rows/2):0))*W);Ae(e._scroller.settings,{minScroll:s,maxScroll:a}),e._scroller.refresh(t)},B[e.key]=e,e}function _(e,t,a,s,n){var i,o,c,r,l,h,f,p,b="",v=G._tempSelected[t],g=e._disabled||{};for(i=a;i<=s;i++)c=d(e,i),l=u(c),r=m(c),o=c&&void 0!==c.cssClass?c.cssClass:"",h=c&&void 0!==c.label?c.label:"",f=c&&c.invalid,p=void 0!==r&&r==F[t]&&!e.multiple,b+='<div role="option" aria-selected="'+!!v[r]+'" class="mbsc-sc-itm '+(n?"mbsc-sc-itm-3d ":"")+o+" "+(p?"mbsc-sc-itm-sel ":"")+(v[r]?P:"")+(void 0===r?" mbsc-sc-itm-ph":" mbsc-btn-e")+(f?" mbsc-sc-itm-inv-h mbsc-btn-d":"")+(g[r]?" mbsc-sc-itm-inv mbsc-btn-d":"")+'" data-index="'+i+'" data-val="'+r+'"'+(h?' aria-label="'+h+'"':"")+(p?' aria-selected="true"':"")+' style="height:'+W+"px;line-height:"+W+"px;"+(n?Ie+"transform:rotateX("+(e._offset-i)*V%360+"deg) translateZ("+W*j.rows/2+"px);":"")+'">'+(R>1?'<div class="mbsc-sc-itm-ml" style="line-height:'+Math.round(W/R)+"px;font-size:"+Math.round(W/R*.8)+'px;">':"")+l+(R>1?"</div>":"")+"</div>";return b}function y(t){var a=j.headerText;return a?"function"==typeof a?a.call(e,t):a.replace(/\{value\}/i,t):""}function w(e,t,a){var s=Math.round(-a/W)+e._offset,n=s-e._current,i=e._first,o=e._last,c=i+z-S+1,r=o-z+S;n&&(e._first+=n,e._last+=n,e._current=s,n>0?(e._$scroller.append(_(e,t,Math.max(o+1,i+n),o+n)),$e(".mbsc-sc-itm",e._$scroller).slice(0,Math.min(n,o-i+1)).remove(),Y&&(e._$3d.append(_(e,t,Math.max(r+1,c+n),r+n,!0)),$e(".mbsc-sc-itm",e._$3d).slice(0,Math.min(n,r-c+1)).attr("class","mbsc-sc-itm-del"))):n<0&&(e._$scroller.prepend(_(e,t,i+n,Math.min(i-1,o+n))),$e(".mbsc-sc-itm",e._$scroller).slice(Math.max(n,i-o-1)).remove(),Y&&(e._$3d.prepend(_(e,t,c+n,Math.min(c-1,r+n),!0)),$e(".mbsc-sc-itm",e._$3d).slice(Math.max(n,c-r-1)).attr("class","mbsc-sc-itm-del"))),e._margin+=n*W,e._$scroller.css("margin-top",e._margin+"px"))}function x(e,t,a,s){var n,i=q[e],o=s||i._disabled,c=l(i,t),r=t,d=t,m=0,u=0;if(void 0===t&&(t=h(i,c)),o[t]===!0){for(n=0;c-m>=i.min&&o[r]&&n<100;)n++,m++,r=h(i,c-m);for(n=0;c+u<i.max&&o[d]&&n<100;)n++,u++,d=h(i,c+u);t=(u<m&&u&&2!==a||!m||c-m<0||1==a)&&!o[d]?d:r}return t}function C(t,a,s,n,i,o){var c,r,d,m,u=G._isVisible;N=!0,m=j.validate.call(e,{values:F.slice(0),index:a,direction:s},G)||{},N=!1,m.valid&&(G._tempWheelArray=F=m.valid.slice(0)),o||$e.each(q,function(e,n){if(u&&n._$markup.find(".mbsc-sc-itm-inv").removeClass("mbsc-sc-itm-inv mbsc-btn-d"),n._disabled={},m.disabled&&m.disabled[e]&&$e.each(m.disabled[e],function(e,t){n._disabled[t]=!0,u&&n._$markup.find('.mbsc-sc-itm[data-val="'+t+'"]').addClass("mbsc-sc-itm-inv mbsc-btn-d")}),F[e]=n.multiple?F[e]:x(e,F[e],s),u){if(n.multiple&&void 0!==a||n._$markup.find(".mbsc-sc-itm-sel").removeClass(P).removeAttr("aria-selected"),n.multiple){if(void 0===a)for(var o in G._tempSelected[e])n._$markup.find('.mbsc-sc-itm[data-val="'+o+'"]').addClass(P).attr("aria-selected","true")}else n._$markup.find('.mbsc-sc-itm[data-val="'+F[e]+'"]').addClass("mbsc-sc-itm-sel").attr("aria-selected","true");r=l(n,F[e]),c=r-n._index+n._batch,Math.abs(c)>2*z+1&&(d=c+(2*z+1)*(c>0?-1:1),n._offset+=d,n._margin-=d*W,n._refresh()),n._index=r+n._batch,n._scroller.scroll(-(r-n._offset+n._batch)*W,a===e||void 0===a?t:U,i)}}),X("onValidated"),G._tempValue=j.formatValue(F,G),u&&G._header.html(y(G._tempValue)),G.live&&(G._hasValue=n||G._hasValue,D(n,n,0,!0),n&&X("onSet",{valueText:G._value})),n&&X("onChange",{valueText:G._tempValue})}function T(e,t,a,s,n,i,o){var c=h(e,a);void 0!==c&&(F[t]=c,e._batch=e._array?Math.floor(a/e._length)*e._length:0,setTimeout(function(){C(s,t,n,!0,i,o)},10))}function D(e,t,a,s,n){if(s?G._tempValue=j.formatValue(G._tempWheelArray,G):C(a),!n){G._wheelArray=[];for(var i=0;i<F.length;i++)G._wheelArray[i]=q[i]&&q[i].multiple?Object.keys(G._tempSelected[i])[0]:F[i];G._value=G._hasValue?G._tempValue:null,G._selected=Ae(!0,{},G._tempSelected)}e&&(G._isInput&&J.val(G._hasValue?G._tempValue:""),X("onFill",{valueText:G._hasValue?G._tempValue:"",change:t}),t&&(G._preventChange=!0,J.trigger("change")))}var M,k,S,V,Y,P,$,A,H,E,O,I,F,W,L,N,j,X,R,q,B,z=40,U=1e3,G=this,J=$e(e);pe.call(this,e,t,!0),G.setVal=G._setVal=function(t,a,s,n,i){G._hasValue=null!==t&&void 0!==t,G._tempWheelArray=F=$e.isArray(t)?t.slice(0):j.parseValue.call(e,t,G)||[],D(a,void 0===s?a:s,i,!1,n)},G.getVal=G._getVal=function(e){var t=G._hasValue||e?G[e?"_tempValue":"_value"]:null;return Ee.isNumeric(t)?+t:t},G.setArrayVal=G.setVal,G.getArrayVal=function(e){return e?G._tempWheelArray:G._wheelArray},G.changeWheel=function(e,t,a){var s,n;$e.each(e,function(e,t){n=B[e],s=n._nr,n&&(Ae(n,t),g(n,s,!0),G._isVisible&&(Y&&n._$3d.html(_(n,s,n._first+z-S+1,n._last-z+S,!0)),n._$scroller.html(_(n,s,n._first,n._last)).css("margin-top",n._margin+"px"),n._refresh(N)))}),!G._isVisible||G._isLiquid||N||G.position(),N||C(t,void 0,void 0,a)},G.getValidValue=x,G._generateContent=function(){var e,t=0,a="",s=Y?Ie+"transform: translateZ("+(W*j.rows/2+3)+"px);":"",n='<div class="mbsc-sc-whl-l" style="'+s+"height:"+W+"px;margin-top:-"+(W/2+(j.selectedLineBorder||0))+'px;"></div>',i=0;return $e.each(j.wheels,function(o,c){a+='<div class="mbsc-w-p mbsc-sc-whl-gr-c'+(j.showLabel?" mbsc-sc-lbl-v":"")+'">'+n+'<div class="mbsc-sc-whl-gr'+(Y?" mbsc-sc-whl-gr-3d":"")+($?" mbsc-sc-cp":"")+(j.width||j.maxWidth?'"':'" style="max-width:'+j.maxPopupWidth+'px;"')+">",$e.each(c,function(o,c){G._tempSelected[i]=Ae({},G._selected[i]),q[i]=g(c,i),t+=j.maxWidth?j.maxWidth[i]||j.maxWidth:j.width?j.width[i]||j.width:0,e=void 0!==c.label?c.label:o,a+='<div class="mbsc-sc-whl-w '+(c.cssClass||"")+(c.multiple?" mbsc-sc-whl-multi":"")+'" style="'+(j.width?"width:"+(j.width[i]||j.width)+"px;":(j.minWidth?"min-width:"+(j.minWidth[i]||j.minWidth)+"px;":"")+(j.maxWidth?"max-width:"+(j.maxWidth[i]||j.maxWidth)+"px;":""))+'"><div class="mbsc-sc-whl-o" style="'+s+'"></div>'+n+'<div tabindex="0" aria-live="off" aria-label="'+e+'"'+(c.multiple?' aria-multiselectable="true"':"")+' role="listbox" data-index="'+i+'" class="mbsc-sc-whl" style="height:'+j.rows*W*(Y?1.1:1)+'px;">'+($?'<div data-index="'+i+'" data-dir="inc" class="mbsc-sc-btn mbsc-sc-btn-plus '+(j.btnPlusClass||"")+'" style="height:'+W+"px;line-height:"+W+'px;"></div><div data-index="'+i+'" data-dir="dec" class="mbsc-sc-btn mbsc-sc-btn-minus '+(j.btnMinusClass||"")+'" style="height:'+W+"px;line-height:"+W+'px;"></div>':"")+'<div class="mbsc-sc-lbl">'+e+'</div><div class="mbsc-sc-whl-c" style="height:'+L+"px;margin-top:-"+(L/2+1)+"px;"+s+'"><div class="mbsc-sc-whl-sc" style="top:'+(L-W)/2+'px;">',a+=_(c,i,c._first,c._last)+"</div></div>",Y&&(a+='<div class="mbsc-sc-whl-3d" style="height:'+W+"px;margin-top:-"+W/2+'px;">',a+=_(c,i,c._first+z-S+1,c._last-z+S,!0),a+="</div>"),a+="</div></div>",i++}),a+="</div></div>"}),t&&(j.maxPopupWidth=t),a},G._attachEvents=function(e){$e(".mbsc-sc-btn",e).on("touchstart mousedown",s).on("touchmove",n).on("touchend touchcancel",i),$e(".mbsc-sc-whl",e).on("keydown",o).on("keyup",c)},G._detachEvents=function(){for(var e=0;e<q.length;e++)q[e]._scroller.destroy()},G._markupReady=function(e){M=e,$e(".mbsc-sc-whl",M).each(function(e){var t,a=$e(this),s=q[e],n=-(s.min-s._offset+(s.multiple&&!Y?Math.floor(j.rows/2):0))*W,i=Math.min(n,-(s.max-s._offset-(s.multiple&&!Y?Math.floor(j.rows/2):0))*W);s._$markup=a,s._$scroller=$e(".mbsc-sc-whl-sc",this),s._$3d=$e(".mbsc-sc-whl-3d",this),s._scroller=new Pe(this,{mousewheel:j.mousewheel,moveElement:s._$scroller,initialPos:(s._first-s._index)*W,contSize:0,snap:W,minScroll:i,maxScroll:n,maxSnapScroll:z,prevDef:!0,stopProp:!0,timeUnit:3,easing:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",sync:function(e,t,a){Y&&(s._$3d[0].style[Oe+"Transition"]=t?Ie+"transform "+Math.round(t)+"ms "+a:"",s._$3d[0].style[Oe+"Transform"]="rotateX("+-e/W*V+"deg)")},onStart:function(t,a){a.settings.readonly=v(e)},onGestureStart:function(){a.addClass("mbsc-sc-whl-a mbsc-sc-whl-anim"),X("onWheelGestureStart",{index:e})},onGestureEnd:function(a){var n=90==a.direction?1:2,i=a.duration,o=a.destinationY;t=Math.round(-o/W)+s._offset,T(s,e,t,i,n)},onAnimationStart:function(){a.addClass("mbsc-sc-whl-anim")},onAnimationEnd:function(){a.removeClass("mbsc-sc-whl-a mbsc-sc-whl-anim"),X("onWheelAnimationEnd",{index:e}),s._$3d.find(".mbsc-sc-itm-del").remove()},onMove:function(t){w(s,e,t.posY)},onBtnTap:function(t){r(e,$e(t.target))}})}),C()},G._fillValue=function(){G._hasValue=!0,D(!0,!0,0,!0)},G._clearValue=function(){$e(".mbsc-sc-whl-multi .mbsc-sc-itm-sel",M).removeClass(P).removeAttr("aria-selected")},G._readValue=function(){var t=J.val()||"",a=0;""!==t&&(G._hasValue=!0),G._tempWheelArray=F=G._hasValue&&G._wheelArray?G._wheelArray.slice(0):j.parseValue.call(e,t,G)||[],G._tempSelected=Ae(!0,{},G._selected),$e.each(j.wheels,function(e,t){$e.each(t,function(e,t){q[a]=g(t,a),a++})}),D(!1,!1,0,!0),X("onRead")},G.__processSettings=function(){j=G.settings,X=G.trigger,R=j.multiline,P="mbsc-sc-itm-sel mbsc-ic mbsc-ic-"+j.checkIcon,q=[],B={}},G.__init=function(){$=j.showScrollArrows,Y=j.scroll3d&&!je&&!$,W=j.height,L=Y?2*Math.round((W-.03*(W*j.rows/2+3))/2):W,S=Math.round(1.8*j.rows),V=360/(2*S),$&&(j.rows=Math.max(3,j.rows)),j.cssClass=(j.cssClass||"")+" mbsc-sc"},G._getItemValue=m,G._tempSelected={},G._selected={},a||G.init(t)};Xe.prototype={_hasDef:!0,_hasTheme:!0,_hasLang:!0,_hasPreset:!0,_class:"scroller",_defaults:Ae({},pe.prototype._defaults,{minWidth:80,height:40,rows:3,multiline:1,delay:300,readonly:!1,showLabel:!0,setOnTap:!1,wheels:[],preset:"",speedUnit:.0012,timeUnit:.08,checkIcon:"checkmark",validate:function(){},formatValue:function(e){return e.join(" ")},parseValue:function(e,t){var a,s,n=[],i=[],o=0;return null!==e&&void 0!==e&&(n=(e+"").split(" ")),$e.each(t.settings.wheels,function(e,c){$e.each(c,function(e,c){s=c.data,a=t._getItemValue(s[0]),$e.each(s,function(e,s){if(n[o]==t._getItemValue(s))return a=t._getItemValue(s),!1}),i.push(a),o++})}),i}})},k.classes.Scroller=Xe;var Re=k.$,qe=Q.adjustedDate,Be={separator:" ",dateFormat:"mm/dd/yy",dateDisplay:"MMddyy",timeFormat:"h:ii A",dayText:"Day",monthText:"Month",yearText:"Year",hourText:"Hours",minuteText:"Minutes",ampmText:"&nbsp;",secText:"Seconds",nowText:"Now",todayText:"Today"},ze=function e(t){function a(e){return e<10?"0"+e:e}function s(e){var t,a,s,n=[];if(e){for(t=0;t<e.length;t++)if(a=e[t],a.start&&a.start.getTime)for(s=new Date(a.start);s<=a.end;)n.push(qe(s.getFullYear(),s.getMonth(),s.getDate())),s.setDate(s.getDate()+1);else n.push(a);return n}return e}function n(e,t,a,s){return Math.min(s,Math.floor(e/t)*t+a)}function i(e,t,a){return Math.floor((a-t)/e)*e+t}function o(e){return W.getYear(e)}function c(e){return W.getMonth(e)}function r(e){return W.getDay(e)}function l(e){var t=e.getHours();return t=K&&t>=12?t-12:t,n(t,ae,oe,le)}function d(e){return n(e.getMinutes(),se,ce,de)}function m(e){return n(e.getSeconds(),ne,re,me)}function u(e){return e.getMilliseconds()}function h(e){return e.getHours()>11?1:0}function f(e){return e.getFullYear()+"-"+a(e.getMonth()+1)+"-"+a(e.getDate())}function p(e){return n(Math.round((e.getTime()-new Date(e).setHours(0,0,0,0))/1e3),P,0,86400)}function b(e,t,a,s){var n;return void 0===H[t]||(n=+e[H[t]],isNaN(n))?a?be[t](a):void 0!==E[t]?E[t]:be[t](s):n}function v(e){var t,a=new Date((new Date).setHours(0,0,0,0));if(null===e)return e;void 0!==H.dd&&(t=e[H.dd].split("-"),t=new Date(t[0],t[1]-1,t[2])),void 0!==H.tt&&(t=t||a,t=new Date(t.getTime()+e[H.tt]%86400*1e3));var s=b(e,"y",t,a),n=b(e,"m",t,a),i=Math.min(b(e,"d",t,a),W.getMaxDayOfMonth(s,n)),o=b(e,"h",t,a);return W.getDate(s,n,i,K&&b(e,"a",t,a)?o+12:o,b(e,"i",t,a),b(e,"s",t,a),b(e,"u",t,a))}function g(e,t){var a,s,n=["y","m","d","a","h","i","s","u","dd","tt"],i=[];if(null===e||void 0===e)return e;for(a=0;a<n.length;a++)s=n[a],void 0!==H[s]&&(i[H[s]]=be[s](e)),t&&(E[s]=be[s](e));return i}function _(e,t){return t?Math.floor(new Date(e)/864e5):e.getMonth()+12*(e.getFullYear()-1970)}function y(e){return{value:e,display:(/yy/i.test(B)?e:(e+"").substr(2,2))+(W.yearSuffix||"")}}function w(e){return e}function x(e){var t=/d/i.test(e);return{label:"",cssClass:"mbsc-dt-whl-date",min:G?_(f(G),t):void 0,max:J?_(f(J),t):void 0,data:function(a){var s=new Date((new Date).setHours(0,0,0,0)),n=t?new Date(864e5*a):new Date(1970,a,1);return t&&(n=new Date(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate())),{invalid:t&&!k(n,!0),value:f(n),display:s.getTime()==n.getTime()?W.todayText:Q.formatDate(e,n,W)}},getIndex:function(e){return _(e,t)}}}function C(e){var t,a,s,n=[];for(/s/i.test(e)?a=ne:/i/i.test(e)?a=60*se:/h/i.test(e)&&(a=3600*ae),P=fe.tt=a,t=0;t<86400;t+=a)s=new Date((new Date).setHours(0,0,0,0)+1e3*t),n.push({value:t,display:Q.formatDate(e,s,W)});return{label:"",cssClass:"mbsc-dt-whl-time",data:n}}function T(){var t,s,n,i,o,c,r,l,d=0,m=[],u=[],h=[];if(e.match(/date/i)){for(t=R.split(/\|/.test(R)?"|":""),i=0;i<t.length;i++)if(n=t[i],c=0,n.length)if(/y/i.test(n)&&c++,/m/i.test(n)&&c++,/d/i.test(n)&&c++,c>1&&void 0===H.dd)H.dd=d,d++,u.push(x(n)),h=u,$=!0;else if(/y/i.test(n)&&void 0===H.y)H.y=d,d++,u.push({cssClass:"mbsc-dt-whl-y",label:W.yearText,min:G?W.getYear(G):void 0,max:J?W.getYear(J):void 0,data:y,getIndex:w});else if(/m/i.test(n)&&void 0===H.m){for(H.m=d,r=[],d++,o=0;o<12;o++)l=B.replace(/[dy]/gi,"").replace(/mm/,a(o+1)+(W.monthSuffix||"")).replace(/m/,o+1+(W.monthSuffix||"")),r.push({value:o,display:/MM/.test(l)?l.replace(/MM/,'<span class="mbsc-dt-month">'+W.monthNames[o]+"</span>"):l.replace(/M/,'<span class="mbsc-dt-month">'+W.monthNamesShort[o]+"</span>")});u.push({cssClass:"mbsc-dt-whl-m",label:W.monthText,data:r})}else if(/d/i.test(n)&&void 0===H.d){for(H.d=d,r=[],d++,o=1;o<32;o++)r.push({value:o,display:(/dd/i.test(B)?a(o):o)+(W.daySuffix||"")});u.push({cssClass:"mbsc-dt-whl-d",label:W.dayText,data:r})}m.push(u)}if(e.match(/time/i)){for(s=q.split(/\|/.test(q)?"|":""),i=0;i<s.length;i++)if(n=s[i],c=0,n.length&&(/h/i.test(n)&&c++,/i/i.test(n)&&c++,/s/i.test(n)&&c++,/a/i.test(n)&&c++),c>1&&void 0===H.tt)H.tt=d,d++,h.push(C(n));else if(/h/i.test(n)&&void 0===H.h){for(r=[],H.h=d,d++,o=oe;o<(K?12:24);o+=ae)r.push({value:o,display:K&&0===o?12:/hh/i.test(z)?a(o):o});h.push({cssClass:"mbsc-dt-whl-h",label:W.hourText,data:r})}else if(/i/i.test(n)&&void 0===H.i){for(r=[],H.i=d,d++,o=ce;o<60;o+=se)r.push({value:o,display:/ii/i.test(z)?a(o):o});h.push({cssClass:"mbsc-dt-whl-i",label:W.minuteText,data:r})}else if(/s/i.test(n)&&void 0===H.s){for(r=[],H.s=d,d++,o=re;o<60;o+=ne)r.push({value:o,display:/ss/i.test(z)?a(o):o});h.push({cssClass:"mbsc-dt-whl-s",label:W.secText,data:r})}else/a/i.test(n)&&void 0===H.a&&(H.a=d,d++,h.push({cssClass:"mbsc-dt-whl-a",label:W.ampmText,data:/A/.test(n)?[{value:0,display:W.amText.toUpperCase()},{value:1,display:W.pmText.toUpperCase()}]:[{value:0,display:W.amText},{value:1,display:W.pmText}]}));h!=u&&m.push(h)}return m}function D(e){var t,a,s,n={};if(e.is("input")){switch(e.attr("type")){case"date":t="yy-mm-dd";break;case"datetime":t="yy-mm-ddTHH:ii:ssZ";break;case"datetime-local":t="yy-mm-ddTHH:ii:ss";break;case"month":t="yy-mm",n.dateOrder="mmyy";break;case"time":t="HH:ii:ss"}n.format=t,a=e.attr("min"),s=e.attr("max"),a&&(n.min=Q.parseDate(t,a)),s&&(n.max=Q.parseDate(t,s))}return n}function M(e,t){var a,s,n=!1,i=!1,o=0,c=0,r=G?v(g(G)):-(1/0),l=J?v(g(J)):1/0;if(k(e))return e;if(e<r&&(e=r),e>l&&(e=l),a=e,s=e,2!==t)for(n=k(a);!n&&a<l;)a=new Date(a.getTime()+864e5),n=k(a),o++;if(1!==t)for(i=k(s);!i&&s>r;)s=new Date(s.getTime()-864e5),i=k(s),c++;return 1===t&&n?a:2===t&&i?s:c<=o&&i?s:a}function k(e,t){return!(!t&&e<G)&&(!(!t&&e>J)&&(!!S(e,N)||!S(e,L)))}function S(e,t){var a,s,n;if(t)for(s=0;s<t.length;s++)if(a=t[s],n=a+"",!a.start)if(a.getTime){if(e.getFullYear()==a.getFullYear()&&e.getMonth()==a.getMonth()&&e.getDate()==a.getDate())return!0}else if(n.match(/w/i)){if(n=+n.replace("w",""),n==e.getDay())return!0}else if(n=n.split("/"),n[1]){if(n[0]-1==e.getMonth()&&n[1]==e.getDate())return!0}else if(n[0]==e.getDate())return!0;return!1}function V(e,t,a,s,n,i,o){var c,r,l,d;if(e)for(r=0;r<e.length;r++)if(c=e[r],d=c+"",!c.start)if(c.getTime)W.getYear(c)==t&&W.getMonth(c)==a&&(i[W.getDay(c)]=o);else if(d.match(/w/i))for(d=+d.replace("w",""),l=d-s;l<n;l+=7)l>=0&&(i[l+1]=o);else d=d.split("/"),d[1]?d[0]-1==a&&(i[d[1]]=o):i[d[0]]=o}function Y(e,t,a,s,i,o,c,r){var l,d,m,u,h,f,p,b,v,g,_,y,w,x,C,T,D,M,k,S,V={},Y=W.getDate(s,i,o),$=["a","h","i","s"];if(e){for(p=0;p<e.length;p++)_=e[p],_.start&&(_.apply=!1,m=_.d,D=m+"",M=D.split("/"),m&&(m.getTime&&s==W.getYear(m)&&i==W.getMonth(m)&&o==W.getDay(m)||!D.match(/w/i)&&(M[1]&&o==M[1]&&i==M[0]-1||!M[1]&&o==M[0])||D.match(/w/i)&&Y.getDay()==+D.replace("w",""))&&(_.apply=!0,V[Y]=!0));for(p=0;p<e.length;p++)if(_=e[p],l=0,T=0,b=ue[a],v=he[a],x=!0,C=!0,d=!1,_.start&&(_.apply||!_.d&&!V[Y])){for(y=_.start.split(":"),w=_.end.split(":"),g=0;g<3;g++)void 0===y[g]&&(y[g]=0),void 0===w[g]&&(w[g]=59),y[g]=+y[g],w[g]=+w[g];if("tt"==a)b=n(Math.round((new Date(Y).setHours(y[0],y[1],y[2])-new Date(Y).setHours(0,0,0,0))/1e3),P,0,86400),v=n(Math.round((new Date(Y).setHours(w[0],w[1],w[2])-new Date(Y).setHours(0,0,0,0))/1e3),P,0,86400);else{for(y.unshift(y[0]>11?1:0),w.unshift(w[0]>11?1:0),K&&(y[1]>=12&&(y[1]=y[1]-12),w[1]>=12&&(w[1]=w[1]-12)),g=0;g<t;g++)void 0!==O[g]&&(k=n(y[g],fe[$[g]],ue[$[g]],he[$[g]]),S=n(w[g],fe[$[g]],ue[$[g]],he[$[g]]),u=0,h=0,f=0,K&&1==g&&(u=y[0]?12:0,h=w[0]?12:0,f=O[0]?12:0),x||(k=0),C||(S=he[$[g]]),(x||C)&&k+u<O[g]+f&&O[g]+f<S+h&&(d=!0),O[g]!=k&&(x=!1),O[g]!=S&&(C=!1));if(!r)for(g=t+1;g<4;g++)y[g]>0&&(l=fe[a]),w[g]<he[$[g]]&&(T=fe[a]);d||(k=n(y[t],fe[a],ue[a],he[a])+l,S=n(w[t],fe[a],ue[a],he[a])-T,x&&(b=k),C&&(v=S))}if(x||C||d)for(g=b;g<=v;g+=fe[a])c[g]=!r}}}var P,$,A,H={},E={},O=[],I=D(Re(this)),F=Re.extend({},t.settings),W=Re.extend(t.settings,Q.defaults,Be,I,F),L=s(W.invalid),N=s(W.valid),e=W.preset,j="datetime"==e?W.dateFormat+W.separator+W.timeFormat:"time"==e?W.timeFormat:W.dateFormat,X=I.format||j,R=W.dateWheels||W.dateFormat,q=W.timeWheels||W.timeFormat,B=W.dateWheels||W.dateDisplay,z=q,U=W.baseTheme||W.theme,G=W.min,J=W.max,Z=/time/i.test(e),K=/h/.test(z),ee=/D/.test(B),te=W.steps||{},ae=te.hour||W.stepHour||1,se=te.minute||W.stepMinute||1,ne=te.second||W.stepSecond||1,ie=te.zeroBased,oe=ie||!G?0:G.getHours()%ae,ce=ie||!G?0:G.getMinutes()%se,re=ie||!G?0:G.getSeconds()%ne,le=i(ae,oe,K?11:23),de=i(se,ce,59),me=i(se,ce,59),ue={y:G?G.getFullYear():-(1/0),m:0,d:1,h:oe,i:ce,s:re,a:0,tt:0},he={y:J?J.getFullYear():1/0,m:11,d:31,h:le,i:de,s:me,a:1,tt:86400},fe={y:1,m:1,d:1,h:ae,i:se,s:ne,a:1,tt:1},pe={"android-holo":40,bootstrap:46,ios:50,jqm:46,material:46,mobiscroll:46,wp:50},be={y:o,m:c,d:r,h:l,i:d,s:m,u:u,a:h,dd:f,tt:p};return t.getDate=t.getVal=function(e){return t._hasValue||e?v(t.getArrayVal(e)):null},t.setDate=function(e,a,s,n,i){t.setArrayVal(g(e),a,i,n,s)},A=T(),t.format=j,t.order=H,t.handlers.now=function(){t.setDate(new Date,t.live,1e3,!0,!0)},t.buttons.now={text:W.nowText,icon:W.nowIcon,handler:"now"},{minWidth:$&&Z?pe[U]:void 0,compClass:"mbsc-dt",wheels:A,headerText:!!W.headerText&&function(){return Q.formatDate(j,v(t.getArrayVal(!0)),W)},formatValue:function(e){return Q.formatDate(X,v(e),W)},parseValue:function(e){return e||(E={}),g(e?Q.parseDate(X,e,W):W.defaultValue&&W.defaultValue.getTime?W.defaultValue:new Date,!!e&&!!e.getTime)},validate:function(e){var a,s,n,i,o=e.values,c=e.index,r=e.direction,l=t.settings.wheels[0][H.d],d=M(v(o),r),m=g(d),u=[],h={},f=be.y(d),p=be.m(d),b=W.getMaxDayOfMonth(f,p),_=!0,y=!0;if(Re.each(["dd","y","m","d","tt","a","h","i","s"],function(e,t){if(void 0!==H[t]){var a=ue[t],n=he[t],i=be[t](d);if(u[H[t]]=[],_&&G&&(a=be[t](G)),y&&J&&(n=be[t](J)),"y"!=t&&"dd"!=t)for(s=ue[t];s<=he[t];s+=fe[t])(s<a||s>n)&&u[H[t]].push(s);if(i<a&&(i=a),i>n&&(i=n),_&&(_=i==a),y&&(y=i==n),"d"==t){var o=W.getDate(f,p,1).getDay(),c={};V(L,f,p,o,b,c,1),V(N,f,p,o,b,c,0),Re.each(c,function(e,a){a&&u[H[t]].push(e)})}}}),Z&&Re.each(["a","h","i","s","tt"],function(e,a){var s=be[a](d),n=be.d(d),i={};void 0!==H[a]&&(Y(L,e,a,f,p,n,i,0),Y(N,e,a,f,p,n,i,1),Re.each(i,function(e,t){t&&u[H[a]].push(e)}),O[e]=t.getValidValue(H[a],s,r,i))}),l&&(l._length!==b||ee&&(void 0===c||c===H.y||c===H.m))){for(h[H.d]=l,l.data=[],a=1;a<=b;a++)i=W.getDate(f,p,a).getDay(),n=B.replace(/[my]/gi,"").replace(/dd/,(a<10?"0"+a:a)+(W.daySuffix||"")).replace(/d/,a+(W.daySuffix||"")),l.data.push({value:a,display:n.match(/DD/)?n.replace(/DD/,'<span class="mbsc-dt-day">'+W.dayNames[i]+"</span>"):n.replace(/D/,'<span class="mbsc-dt-day">'+W.dayNamesShort[i]+"</span>")});t._tempWheelArray[H.d]=m[H.d],t.changeWheel(h)}return{disabled:u,valid:m}}}};Re.each(["date","time","datetime"],function(e,t){k.presets.scroller[t]=ze});var Ue=k.$,Ge=k.presets.scroller,Je=k.classes,Ze=k.util,Ke=Ze.datetime.adjustedDate,Qe=Ze.jsPrefix,et=Ze.testTouch,tt=Ze.getCoord,at=Ze.animEnd,st=new Date,nt={min:new Date(st.getFullYear()-100,0,1),max:new Date(st.getFullYear()+1,11,31,23,59,59),controls:["calendar"],firstDay:0,weekDays:"short",maxMonthWidth:170,months:1,preMonths:1,highlight:!0,outerMonthChange:!0,quickNav:!0,yearChange:!0,todayClass:"mbsc-cal-today",btnCalPrevClass:"mbsc-ic mbsc-ic-arrow-left6",btnCalNextClass:"mbsc-ic mbsc-ic-arrow-right6",dateText:"Date",timeText:"Time",calendarText:"Calendar",todayText:"Today",prevMonthText:"Previous Month",nextMonthText:"Next Month",prevYearText:"Previous Year",nextYearText:"Next Year"};Ge.calbase=function(e){function t(e){var t;xe=Ue(this),Ce=!1,"keydown"!=e.type?(ye=tt(e,"X"),we=tt(e,"Y"),t=et(e,this)):t=32===e.keyCode,Te||!t||xe.hasClass("mbsc-fr-btn-d")||(Te=!0,setTimeout(n,100),"mousedown"==e.type&&Ue(document).on("mousemove",a).on("mouseup",s))}function a(e){(Math.abs(ye-tt(e,"X"))>7||Math.abs(we-tt(e,"Y"))>7)&&(Te=!1,xe.removeClass("mbsc-fr-btn-a"))}function s(e){"touchend"==e.type&&e.preventDefault(),xe&&!Ce&&n(),Te=!1,"mouseup"==e.type&&Ue(document).off("mousemove",a).off("mouseup",s)}function n(){Ce=!0,xe.hasClass("mbsc-cal-prev-m")?C():xe.hasClass("mbsc-cal-next-m")?x():xe.hasClass("mbsc-cal-prev-y")?D(xe):xe.hasClass("mbsc-cal-next-y")&&T(xe)}function i(e){return!(e<Ke(re.getFullYear(),re.getMonth(),re.getDate()))&&(!(e>le)&&(void 0===be[e]||void 0!==pe[e]))}function o(e,t,a){var s,n,i,o,c={},r=dt+ke;return e&&Ue.each(e,function(e,l){if(s=l.d||l.start||l,n=s+"",l.start&&l.end)for(o=new Date(l.start);o<=l.end;)i=Ke(o.getFullYear(),o.getMonth(),o.getDate()),c[i]=c[i]||[],c[i].push(l),o.setDate(o.getDate()+1);else if(s.getTime)i=Ke(s.getFullYear(),s.getMonth(),s.getDate()),c[i]=c[i]||[],c[i].push(l);else if(n.match(/w/i)){var d=+n.replace("w",""),m=0,u=Xe.getDate(t,a-dt-Se,1).getDay();for(Xe.firstDay-u+1>1&&(m=7),A=0;A<5*Me;A++)i=Xe.getDate(t,a-dt-Se,7*A-m-u+1+d),c[i]=c[i]||[],c[i].push(l)}else if(n=n.split("/"),n[1])a+r>=11&&(i=Xe.getDate(t+1,n[0]-1,n[1]),c[i]=c[i]||[],c[i].push(l)),a-r<=1&&(i=Xe.getDate(t-1,n[0]-1,n[1]),c[i]=c[i]||[],c[i].push(l)),i=Xe.getDate(t,n[0]-1,n[1]),c[i]=c[i]||[],c[i].push(l);else for(A=0;A<Me;A++)i=Xe.getDate(t,a-dt-Se+A,n[0]),Xe.getDay(i)==n[0]&&(c[i]=c[i]||[],c[i].push(l))}),c}function c(t,a){be=o(Xe.invalid,t,a),pe=o(Xe.valid,t,a),e.onGenMonth(t,a)}function r(e,t,a,s,n,i,o){var c='<div class="mbsc-cal-h mbsc-cal-sc-c mbsc-cal-'+e+"-c "+(Xe.calendarClass||"")+'"><div class="mbsc-cal-sc"><div class="mbsc-cal-sc-p"><div class="mbsc-cal-sc-tbl"><div class="mbsc-cal-sc-row">';for($=1;$<=t;$++)c+=$<=12||$>a?'<div class="mbsc-cal-sc-m-cell mbsc-cal-sc-cell mbsc-cal-sc-empty"><div class="mbsc-cal-sc-cell-i">&nbsp;</div></div>':'<div tabindex="0" role="button"'+(i?' aria-label="'+i[$-13]+'"':"")+' class="mbsc-fr-btn-e mbsc-fr-btn-nhl mbsc-cal-sc-m-cell mbsc-cal-sc-cell mbsc-cal-'+e+'-s" data-val='+(s+$-13)+'><div class="mbsc-cal-sc-cell-i mbsc-cal-sc-tbl"><div class="mbsc-cal-sc-cell">'+(o?o[$-13]:s+$-13+n)+"</div></div></div>",$<t&&($%12===0?c+='</div></div></div><div class="mbsc-cal-sc-p" style="'+(rt?"top":it?"right":"left")+":"+100*Math.round($/12)+'%"><div class="mbsc-cal-sc-tbl"><div class="mbsc-cal-sc-row">':$%3===0&&(c+='</div><div class="mbsc-cal-sc-row">'));return c+="</div></div></div></div></div>"}function l(t,a){var s,n,o,c,r,l,d,m,u,h,f,p,b,v,g,_,y=1,w=0,x=Xe.getDate(t,a,1),C=Xe.getYear(x),T=Xe.getMonth(x),D=null!==Xe.defaultValue||e._hasValue?e.getDate(!0):null,M=Xe.getDate(C,T,1).getDay(),k='<div class="mbsc-cal-table">',S='<div class="mbsc-cal-week-nr-c">';for(Xe.firstDay-M+1>1&&(w=7),_=0;_<42;_++)g=_+Xe.firstDay-w,s=Xe.getDate(C,T,g-M+1),o=s.getFullYear(),c=s.getMonth(),r=s.getDate(),l=Xe.getMonth(s),d=Xe.getDay(s),v=Xe.getMaxDayOfMonth(o,c),m=o+"-"+c+"-"+r,u=Ue.extend({valid:i(s),selected:D&&D.getFullYear()===o&&D.getMonth()===c&&D.getDate()===r},e.getDayProps(s,D)),h=u.valid,f=u.selected,n=u.cssClass,p=new Date(s).setHours(12,0,0,0)===(new Date).setHours(12,0,0,0),b=l!==T,Le[m]=u,_%7===0&&(k+=(_?"</div>":"")+'<div class="mbsc-cal-row'+(Xe.highlight&&D&&D-s>=0&&D-s<6048e5?" mbsc-cal-week-hl":"")+'">'),qe&&1==s.getDay()&&("month"==qe&&b&&y>1?y=1==r?1:2:"year"==qe&&(y=Xe.getWeekNumber(s)),S+='<div class="mbsc-cal-week-nr"><div class="mbsc-cal-week-nr-i">'+y+"</div></div>",y++),k+='<div role="button" tabindex="-1" aria-label="'+(p?Xe.todayText+", ":"")+Xe.dayNames[s.getDay()]+", "+Xe.monthNames[l]+" "+d+" "+(u.ariaLabel?", "+u.ariaLabel:"")+'"'+(b&&!Ye?' aria-hidden="true"':"")+(f?' aria-selected="true"':"")+(h?"":' aria-disabled="true"')+' data-day="'+g%7+'" data-full="'+m+'"class="mbsc-cal-day '+(Xe.dayClass||"")+(f?" mbsc-cal-day-sel":"")+(p?" "+Xe.todayClass:"")+(n?" "+n:"")+(1==d?" mbsc-cal-day-first":"")+(d==v?" mbsc-cal-day-last":"")+(b?" mbsc-cal-day-diff":"")+(h?" mbsc-cal-day-v mbsc-fr-btn-e mbsc-fr-btn-nhl":" mbsc-cal-day-inv")+'"><div class="mbsc-cal-day-i '+(f?bt:"")+" "+(Xe.innerDayClass||"")+'"><div class="mbsc-cal-day-fg">'+d+"</div>"+(u.markup||"")+'<div class="mbsc-cal-day-frame"></div></div></div>';return k+="</div></div>"+S+"</div>"}function d(e,t,a){var s=Xe.getDate(e,t,1),n=Xe.getYear(s),i=Xe.getMonth(s),o=n+pt;if(lt){if(Ae&&Ae.removeClass("mbsc-cal-sc-sel").removeAttr("aria-selected").find(".mbsc-cal-sc-cell-i").removeClass(bt),He&&He.removeClass("mbsc-cal-sc-sel").removeAttr("aria-selected").find(".mbsc-cal-sc-cell-i").removeClass(bt),Ae=Ue('.mbsc-cal-year-s[data-val="'+n+'"]',O).addClass("mbsc-cal-sc-sel").attr("aria-selected","true"),He=Ue('.mbsc-cal-month-s[data-val="'+i+'"]',O).addClass("mbsc-cal-sc-sel").attr("aria-selected","true"),Ae.find(".mbsc-cal-sc-cell-i").addClass(bt),He.find(".mbsc-cal-sc-cell-i").addClass(bt),$e&&$e.scroll(Ae,a),Ue(".mbsc-cal-month-s",O).removeClass("mbsc-fr-btn-d"),n===ae)for($=0;$<ne;$++)Ue('.mbsc-cal-month-s[data-val="'+$+'"]',O).addClass("mbsc-fr-btn-d");if(n===se)for($=ie+1;$<=12;$++)Ue('.mbsc-cal-month-s[data-val="'+$+'"]',O).addClass("mbsc-fr-btn-d")}for(1==ee.length&&ee.attr("aria-label",n).html(o),$=0;$<De;++$)s=Xe.getDate(e,t-Se+$,1),n=Xe.getYear(s),i=Xe.getMonth(s),o=n+pt,Ue(K[$]).attr("aria-label",Xe.monthNames[i]+(mt?"":" "+n)).html((!mt&&te<Q?o+" ":"")+G[i]+(!mt&&te>Q?" "+o:"")),ee.length>1&&Ue(ee[$]).html(o);Xe.getDate(e,t-Se-1,1)<oe?u(Ue(".mbsc-cal-prev-m",O)):m(Ue(".mbsc-cal-prev-m",O)),Xe.getDate(e,t+De-Se,1)>ce?u(Ue(".mbsc-cal-next-m",O)):m(Ue(".mbsc-cal-next-m",O)),Xe.getDate(e,t,1).getFullYear()<=oe.getFullYear()?u(Ue(".mbsc-cal-prev-y",O)):m(Ue(".mbsc-cal-prev-y",O)),Xe.getDate(e,t,1).getFullYear()>=ce.getFullYear()?u(Ue(".mbsc-cal-next-y",O)):m(Ue(".mbsc-cal-next-y",O))}function m(e){e.removeClass(_t).find(".mbsc-cal-btn-txt").removeAttr("aria-disabled")}function u(e){e.addClass(_t).find(".mbsc-cal-btn-txt").attr("aria-disabled","true")}function h(t){e.trigger("onDayHighlight",{date:t}),Xe.highlight&&(Ue(".mbsc-cal-day-sel .mbsc-cal-day-i",F).removeClass(bt),Ue(".mbsc-cal-day-sel",F).removeClass("mbsc-cal-day-sel").removeAttr("aria-selected"),Ue(".mbsc-cal-week-hl",F).removeClass("mbsc-cal-week-hl"),(null!==Xe.defaultValue||e._hasValue)&&Ue('.mbsc-cal-day[data-full="'+t.getFullYear()+"-"+t.getMonth()+"-"+t.getDate()+'"]',F).addClass("mbsc-cal-day-sel").attr("aria-selected","true").find(".mbsc-cal-day-i").addClass(bt).closest(".mbsc-cal-row").addClass("mbsc-cal-week-hl"))}function f(t,a){if(X&&("calendar"===ge||a)){var s,n,i=Xe.getDate(me,ue,1),o=Math.abs(12*(Xe.getYear(t)-Xe.getYear(i))+Xe.getMonth(t)-Xe.getMonth(i));e.needsSlide&&o&&(me=Xe.getYear(t),ue=Xe.getMonth(t),t>i?(n=o>dt-Se+De-1,ue-=n?0:o-dt,s="next"):t<i&&(n=o>dt+Se,ue+=n?0:o-dt,s="prev"),g(me,ue,s,Math.min(o,dt),n,!0)),a||(de=t,h(t)),e.needsSlide=!0}}function p(t,a,s){for(s||e.trigger("onMonthLoading",{year:t,month:a}),c(t,a),$=0;$<Me;$++)Ie[$].html(l(t,a-Se-dt+$));v(),Ve=void 0,e.trigger("onMonthLoaded",{year:t,month:a})}function b(e,t){for(var a=dt,s=dt;s&&Xe.getDate(e,t+s+De-Se-1,1)>ce;)s--;for(;a&&Xe.getDate(e,t-a-Se,1)<oe;)a--;Ue.extend(J.settings,{contSize:De*L,
snap:L,minScroll:N-(it?a:s)*L,maxScroll:N+(it?s:a)*L}),J.refresh()}function v(){qe&&B.html(Ue(".mbsc-cal-week-nr-c",Ie[dt]).html()),Ue(".mbsc-cal-slide-a .mbsc-cal-day",W).attr("tabindex",0)}function g(t,a,s,n,i,o,r){if(t&&Fe.push({y:t,m:a,dir:s,slideNr:n,load:i,active:o,callback:r}),!_e){var m,u=Fe.shift();if(t=u.y,a=u.m,s="next"===u.dir,n=u.slideNr,i=u.load,o=u.active,r=u.callback||Ne,m=Xe.getDate(t,a,1),t=Xe.getYear(m),a=Xe.getMonth(m),_e=!0,e.changing=!0,e.trigger("onMonthChange",{year:t,month:a}),e.trigger("onMonthLoading",{year:t,month:a}),c(t,a),i)for($=0;$<De;$++)Ie[s?Me-De+$:$].html(l(t,a-Se+$));o&&Oe.addClass("mbsc-cal-slide-a"),setTimeout(function(){e.ariaMessage(Xe.monthNames[a]+" "+t),d(t,a,200),N=s?N-L*n*ot:N+L*n*ot,J.scroll(N,o?200:0,!1,function(){var o;if(Ie.length){if(Oe.removeClass("mbsc-cal-slide-a").attr("aria-hidden","true"),s)for(o=Ie.splice(0,n),$=0;$<n;$++)Ie.push(o[$]),y(Ie[Ie.length-1],+Ie[Ie.length-2].attr("data-curr")+100*ot);else for(o=Ie.splice(Me-n,n),$=n-1;$>=0;$--)Ie.unshift(o[$]),y(Ie[0],+Ie[1].attr("data-curr")-100*ot);for($=0;$<n;$++)Ie[s?Me-n+$:$].html(l(t,a-Se-dt+$+(s?Me-n:0))),i&&Ie[s?$:Me-n+$].html(l(t,a-Se-dt+$+(s?0:Me-n)));for($=0;$<De;$++)Ie[dt+$].addClass("mbsc-cal-slide-a").removeAttr("aria-hidden");b(t,a),_e=!1}Fe.length?setTimeout(function(){g()},10):(me=t,ue=a,e.changing=!1,Ue(".mbsc-cal-day",W).attr("tabindex",-1),v(),void 0!==Ve?p(t,a,Ve):e.trigger("onMonthLoaded",{year:t,month:a}),r())})},10)}}function _(){var t=Ue(this),a=e.live,s=e.getDate(!0),n=t.attr("data-full"),i=n.split("-"),o=Ke(i[0],i[1],i[2]),c=Ke(o.getFullYear(),o.getMonth(),o.getDate(),s.getHours(),s.getMinutes(),s.getSeconds()),r=t.hasClass("mbsc-cal-day-sel");!Ye&&t.hasClass("mbsc-cal-day-diff")||e.trigger("onDayChange",Ue.extend(Le[n],{date:c,target:this,selected:r}))!==!1&&(e.needsSlide=!1,j=!0,e.setDate(c,a,.2,!a,!0),Xe.outerMonthChange&&(Te=!0,o<Xe.getDate(me,ue-Se,1)?C():o>Xe.getDate(me,ue-Se+De,0)&&x(),Te=!1),e.live&&e.trigger("onSet",{valueText:e._value}))}function y(e,t){e.attr("data-curr",t),e[0].style[Qe+"Transform"]="translate3d("+(rt?"0,"+t+"%,":t+"%,0,")+"0)"}function w(t){e.isVisible()&&X&&(e.changing?Ve=t:p(me,ue,t))}function x(){Te&&Xe.getDate(me,ue+De-Se,1)<=ce&&g(me,++ue,"next",1,!1,!0,x)}function C(){Te&&Xe.getDate(me,ue-Se-1,1)>=oe&&g(me,--ue,"prev",1,!1,!0,C)}function T(e){Te&&Xe.getDate(me,ue,1)<=Xe.getDate(Xe.getYear(ce)-1,Xe.getMonth(ce)-ke,1)?g(++me,ue,"next",dt,!0,!0,function(){T(e)}):Te&&!e.hasClass("mbsc-fr-btn-d")&&g(Xe.getYear(ce),Xe.getMonth(ce)-ke,"next",dt,!0,!0)}function D(e){Te&&Xe.getDate(me,ue,1)>=Xe.getDate(Xe.getYear(oe)+1,Xe.getMonth(oe)+Se,1)?g(--me,ue,"prev",dt,!0,!0,function(){D(e)}):Te&&!e.hasClass("mbsc-fr-btn-d")&&g(Xe.getYear(oe),Xe.getMonth(oe)+Se,"prev",dt,!0,!0)}function M(t,a){t.hasClass("mbsc-cal-v")||(t.addClass("mbsc-cal-v"+(a?"":" mbsc-cal-p-in")).removeClass("mbsc-cal-p-out mbsc-cal-h"),e.trigger("onSelectShow"))}function k(e,t){e.hasClass("mbsc-cal-v")&&e.removeClass("mbsc-cal-v mbsc-cal-p-in").addClass("mbsc-cal-h"+(t?"":" mbsc-cal-p-out"))}function S(e,t){(t||e).hasClass("mbsc-cal-v")?k(e):M(e)}function V(){Ue(this).removeClass("mbsc-cal-p-out mbsc-cal-p-in")}function Y(e){return e[0].innerWidth||e.innerWidth()}var P,$,A,H,E,O,I,F,W,L,N,j,X,R,q,B,z,U,G,J,Z,K,Q,ee,te,ae,se,ne,ie,oe,ce,re,le,de,me,ue,he,fe,pe,be,ve,ge,_e,ye,we,xe,Ce,Te,De,Me,ke,Se,Ve,Ye,Pe,$e,Ae,He,Ee=this,Oe=[],Ie=[],Fe=[],We={},Le={},Ne=function(){},je=Ue.extend({},e.settings),Xe=Ue.extend(e.settings,nt,je),Re="full"==Xe.weekDays?"":"min"==Xe.weekDays?"Min":"Short",qe=Xe.weekCounter,Be=Xe.layout||(/top|bottom|inline/.test(Xe.display)?"liquid":""),ze="liquid"==Be&&"bubble"!==Xe.display,st="center"==Xe.display,it=Xe.rtl,ot=it?-1:1,ct=ze?null:Xe.calendarWidth,rt="vertical"==Xe.calendarScroll,lt=Xe.quickNav,dt=Xe.preMonths,mt=Xe.yearChange,ut=Xe.controls.join(","),ht=(Xe.tabs===!0||Xe.tabs!==!1&&ze)&&Xe.controls.length>1,ft=!ht&&void 0===Xe.tabs&&!ze&&Xe.controls.length>1,pt=Xe.yearSuffix||"",bt=Xe.activeClass||"",vt="mbsc-cal-tab-sel "+(Xe.activeTabClass||""),gt=Xe.activeTabInnerClass||"",_t="mbsc-fr-btn-d "+(Xe.disabledClass||""),yt="",wt="";return ut.match(/calendar/)?X=!0:lt=!1,ut.match(/date/)&&(We.date=1),ut.match(/time/)&&(We.time=1),X&&We.date&&(ht=!0,ft=!1),Xe.layout=Be,Xe.preset=(We.date||X?"date":"")+(We.time?"time":""),"inline"==Xe.display&&Ue(this).closest('[data-role="page"]').on("pageshow",function(){e.position()}),e.changing=!1,e.needsSlide=!0,e.getDayProps=Ne,e.onGenMonth=Ne,e.prepareObj=o,e.refresh=function(){w(!1)},e.redraw=function(){w(!0)},e.navigate=function(t,a){var s,n,i=e.isVisible();a&&i?f(t,!0):(s=Xe.getYear(t),n=Xe.getMonth(t),!i||s==me&&n==ue||(e.trigger("onMonthChange",{year:s,month:n}),d(s,n),p(s,n),b(t.getFullYear(),t.getMonth())),me=s,ue=n)},e.showMonthView=function(){lt&&!U&&(k(wt,!0),k(yt,!0),M(z,!0),U=!0)},e.changeTab=function(t){e._isVisible&&We[t]&&ge!=t&&(ge=t,Ue(".mbsc-cal-pnl",O).removeClass("mbsc-cal-p-in").addClass("mbsc-cal-pnl-h"),Ue(".mbsc-cal-tab",O).removeClass(vt).removeAttr("aria-selected").find(".mbsc-cal-tab-i").removeClass(gt),Ue('.mbsc-cal-tab[data-control="'+t+'"]',O).addClass(vt).attr("aria-selected","true").find(".mbsc-cal-tab-i").addClass(gt),We[ge].removeClass("mbsc-cal-pnl-h").addClass("mbsc-cal-p-in"),"calendar"==ge&&(P=e.getDate(!0),P.getFullYear()===de.getFullYear()&&P.getMonth()===de.getMonth()&&P.getDate()===de.getDate()||f(P)),e.showMonthView(),e.trigger("onTabChange",{tab:ge}))},H=Ge.datetime.call(this,e),Q=(Xe.dateWheels||Xe.dateFormat).search(/m/i),te=(Xe.dateWheels||Xe.dateFormat).search(/y/i),Ue.extend(H,{ariaMessage:Xe.calendarText,onMarkupReady:function(n){var i,o,c="";if(O=Ue(n.target),I="inline"==Xe.display?Ue(this).is("div")?Ue(this):Ue(this).parent():e._window,de=e.getDate(!0),me||(me=Xe.getYear(de),ue=Xe.getMonth(de)),N=0,q=!0,_e=!1,G=Xe.monthNames,ge="calendar",Xe.min&&(oe=Ke(Xe.min.getFullYear(),Xe.min.getMonth(),1),re=Xe.min),Xe.max&&(ce=Ke(Xe.max.getFullYear(),Xe.max.getMonth(),1),le=Xe.max),O.addClass("mbsc-calendar"),E=Ue(".mbsc-fr-popup",O),ve=Ue(".mbsc-fr-c",O),We.date?We.date=Ue(".mbsc-sc-whl-gr-c",O).eq(0):X&&Ue(".mbsc-sc-whl-gr-c",O).eq(0).addClass("mbsc-cal-hdn"),We.time&&(We.time=Ue(".mbsc-sc-whl-gr-c",O).eq(1)),X){for(De="auto"==Xe.months?Math.max(1,Math.min(3,Math.floor((ct||Y(I))/280))):Xe.months,Me=De+2*dt,ke=Math.floor(De/2),Se=Math.round(De/2)-1,Ye=void 0===Xe.showOuterDays?De<2:Xe.showOuterDays,rt=rt&&De<2,o='<div class="mbsc-cal-btnw"><div class="'+(it?"mbsc-cal-next-m":"mbsc-cal-prev-m")+' mbsc-cal-prev mbsc-cal-btn mbsc-fr-btn mbsc-fr-btn-e"><div role="button" tabindex="0" class="mbsc-cal-btn-txt '+(Xe.btnCalPrevClass||"")+'" aria-label="'+Xe.prevMonthText+'"></div></div>',$=0;$<De;++$)o+='<div class="mbsc-cal-btnw-m" style="width: '+100/De+'%"><span role="button" class="mbsc-cal-month"></span></div>';for(o+='<div class="'+(it?"mbsc-cal-prev-m":"mbsc-cal-next-m")+' mbsc-cal-next mbsc-cal-btn mbsc-fr-btn mbsc-fr-btn-e"><div role="button" tabindex="0" class="mbsc-cal-btn-txt '+(Xe.btnCalNextClass||"")+'" aria-label="'+Xe.nextMonthText+'"></div></div></div>',mt&&(c='<div class="mbsc-cal-btnw"><div class="'+(it?"mbsc-cal-next-y":"mbsc-cal-prev-y")+' mbsc-cal-prev mbsc-cal-btn mbsc-fr-btn mbsc-fr-btn-e"><div role="button" tabindex="0" class="mbsc-cal-btn-txt '+(Xe.btnCalPrevClass||"")+'" aria-label="'+Xe.prevYearText+'"></div></div><span role="button" class="mbsc-cal-year"></span><div class="'+(it?"mbsc-cal-prev-y":"mbsc-cal-next-y")+' mbsc-cal-next mbsc-cal-btn mbsc-fr-btn mbsc-fr-btn-e"><div role="button" tabindex="0" class="mbsc-cal-btn-txt '+(Xe.btnCalNextClass||"")+'" aria-label="'+Xe.nextYearText+'"></div></div></div>'),lt&&(ae=Xe.getYear(oe),se=Xe.getYear(ce),ne=Xe.getMonth(oe),ie=Xe.getMonth(ce),fe=Math.ceil((se-ae+1)/12)+2,yt=r("month",36,24,0,"",Xe.monthNames,Xe.monthNamesShort),wt=r("year",12*fe,se-ae+13,ae,pt)),R='<div class="mbsc-w-p mbsc-cal-c"><div class="mbsc-cal mbsc-cal-hl-now '+(De>1?" mbsc-cal-multi ":"")+(qe?" mbsc-cal-weeks ":"")+(rt?" mbsc-cal-vertical":"")+(Ye?"":" mbsc-cal-hide-diff ")+(Xe.calendarClass||"")+'"><div class="mbsc-cal-header"><div class="mbsc-cal-btnc '+(mt?"mbsc-cal-btnc-ym":"mbsc-cal-btnc-m")+'">'+(te<Q||De>1?c+o:o+c)+'</div></div><div class="mbsc-cal-body"><div class="mbsc-cal-m-c mbsc-cal-v"><div class="mbsc-cal-days-c">',A=0;A<De;++A){for(R+='<div aria-hidden="true" class="mbsc-cal-days" style="width: '+100/De+'%"><table cellpadding="0" cellspacing="0"><tr>',$=0;$<7;$++)R+="<th>"+Xe["dayNames"+Re][($+Xe.firstDay)%7]+"</th>";R+="</tr></table></div>"}for(R+='</div><div class="mbsc-cal-week-nrs-c '+(Xe.weekNrClass||"")+'"><div class="mbsc-cal-week-nrs"></div></div><div class="mbsc-cal-anim-c '+(Xe.calendarClass||"")+'"><div class="mbsc-cal-anim">',$=0;$<De+2*dt;$++)R+='<div class="mbsc-cal-slide" aria-hidden="true"></div>';R+="</div></div></div>"+yt+wt+"</div></div></div>",We.calendar=Ue(R)}if(Ue.each(Xe.controls,function(e,t){We[t]=Ue('<div class="mbsc-cal-pnl" id="'+(Ee.id+"_dw_pnl_"+e)+'"></div>').append(Ue('<div class="mbsc-cal-pnl-i"></div>').append(We[t])).appendTo(ve)}),i='<div class="mbsc-cal-tabs"><ul role="tablist">',Ue.each(Xe.controls,function(e,t){We[t]&&(i+='<li role="tab" aria-controls="'+(Ee.id+"_dw_pnl_"+e)+'" class="mbsc-cal-tab '+(e?"":vt)+'" data-control="'+t+'"><a href="#" class="mbsc-fr-btn-e mbsc-fr-btn-nhl mbsc-cal-tab-i '+(e?"":gt)+'">'+Xe[t+"Text"]+"</a></li>")}),i+="</ul></div>",ve.before(i),F=Ue(".mbsc-cal-anim-c",O),W=Ue(".mbsc-cal-anim",F),B=Ue(".mbsc-cal-week-nrs",O),X){for(U=!0,Oe=Ue(".mbsc-cal-slide",W).each(function(e,t){Ie.push(Ue(t))}),Oe.slice(dt,dt+De).addClass("mbsc-cal-slide-a").removeAttr("aria-hidden"),$=0;$<Me;$++)y(Ie[$],100*($-dt)*ot);p(me,ue),J=new Je.ScrollView(F[0],{axis:rt?"Y":"X",easing:"",contSize:0,snap:1,maxSnapScroll:dt,moveElement:W,mousewheel:Xe.mousewheel,time:200,lock:!0,stopProp:!1,minScroll:-(1/0),maxScroll:1/0,onAnimationEnd:function(e){var t=Math.round(((rt?e.posY:e.posX)-N)/L)*ot;t&&g(me,ue-t,t>0?"prev":"next",t>0?t:-t)}})}K=Ue(".mbsc-cal-month",O),ee=Ue(".mbsc-cal-year",O),z=Ue(".mbsc-cal-m-c",O),lt&&(z.on(at,V),yt=Ue(".mbsc-cal-month-c",O).on(at,V),wt=Ue(".mbsc-cal-year-c",O).on(at,V),Pe=Ue(".mbsc-cal-sc-p",O),he={axis:rt?"Y":"X",contSize:0,snap:1,maxSnapScroll:1,rtl:Xe.rtl,mousewheel:Xe.mousewheel,time:200,stopProp:!1,minScroll:-(1/0),maxScroll:1/0},$e=new Je.ScrollView(wt[0],he),Z=new Je.ScrollView(yt[0],he)),ze?O.addClass("mbsc-cal-liq"):Ue(".mbsc-cal",O).width(ct||280*De),Xe.calendarHeight&&Ue(".mbsc-cal-anim-c",O).height(Xe.calendarHeight),e.tap(F,function(e){var t=Ue(e.target);_e||J.scrolled||Xe.readonly===!0||(t=t.closest(".mbsc-cal-day",this),t.hasClass("mbsc-cal-day-v")&&_.call(t[0]))}),Ue(".mbsc-cal-btn",O).on("touchstart mousedown keydown",t).on("touchmove",a).on("touchend touchcancel keyup",s),Ue(".mbsc-cal-tab",O).on("touchstart click",function(t){et(t,this)&&e.changeTab(Ue(this).attr("data-control"))}),lt&&(e.tap(Ue(".mbsc-cal-month",O),function(){wt.hasClass("mbsc-cal-v")||(S(z),U=z.hasClass("mbsc-cal-v")),S(yt),k(wt)}),e.tap(Ue(".mbsc-cal-year",O),function(){wt.hasClass("mbsc-cal-v")||$e.scroll(Ae),yt.hasClass("mbsc-cal-v")||(S(z),U=z.hasClass("mbsc-cal-v")),S(wt),k(yt)}),e.tap(Ue(".mbsc-cal-month-s",O),function(){Z.scrolled||Ue(this).hasClass("mbsc-fr-btn-d")||e.navigate(Xe.getDate(me,Ue(this).attr("data-val"),1))}),e.tap(Ue(".mbsc-cal-year-s",O),function(){$e.scrolled||(P=Xe.getDate(Ue(this).attr("data-val"),ue,1),e.navigate(new Date(Ze.constrain(P,oe,ce))))}),e.tap(wt,function(){$e.scrolled||(k(wt),M(z),U=!0)}),e.tap(yt,function(){Z.scrolled||(k(yt),M(z),U=!0)}))},onShow:function(){X&&d(me,ue)},onPosition:function(t){var a,s,n,i,o,c,r=0,l=0,d=0,m=t.windowHeight;if(ze&&(st&&F.height(""),ve.height(""),W.width("")),L&&(o=L),X&&(L=Math.round(Math.round(F[0][rt?"offsetHeight":"offsetWidth"])/De)),L&&(O.removeClass("mbsc-cal-m mbsc-cal-l"),L>1024?O.addClass("mbsc-cal-l"):L>640&&O.addClass("mbsc-cal-m")),(ht&&(q||ze)||ft)&&(Ue(".mbsc-cal-pnl",O).removeClass("mbsc-cal-pnl-h"),Ue.each(We,function(e,t){a=t[0].offsetWidth,r=Math.max(r,a),l=Math.max(l,t[0].offsetHeight),d+=a}),ht||ft&&d>Y(I)?(s=!0,ge=Ue(".mbsc-cal-tabs .mbsc-cal-tab-sel",O).attr("data-control"),E.addClass("mbsc-cal-tabbed")):(ge="calendar",r="",l="",E.removeClass("mbsc-cal-tabbed"),ve.css({width:"",height:""}))),ze&&st&&X&&(e._isFullScreen=!0,s&&ve.height(We.calendar[0].offsetHeight),i=E[0].offsetHeight,m>=i&&F.height(m-i+F[0].offsetHeight),l=Math.max(l,We.calendar[0].offsetHeight)),s&&(ve.css({width:ze?"":r,height:l}),X&&(L=Math.round(Math.round(F[0][rt?"offsetHeight":"offsetWidth"])/De))),L){if(W[rt?"height":"width"](L),L!==o){if(mt)for(G=Xe.maxMonthWidth>Ue(".mbsc-cal-btnw-m",O).width()?Xe.monthNamesShort:Xe.monthNames,$=0;$<De;++$)Ue(K[$]).text(G[Xe.getMonth(Xe.getDate(me,ue-Se+$,1))]);lt&&(c=wt[0][rt?"offsetHeight":"offsetWidth"],Ue.extend($e.settings,{contSize:c,snap:c,minScroll:(2-fe)*c,maxScroll:-c}),Ue.extend(Z.settings,{contSize:c,snap:c,minScroll:-c,maxScroll:-c}),$e.refresh(),Z.refresh(),wt.hasClass("mbsc-cal-v")&&$e.scroll(Ae)),ze&&!q&&o&&(n=N/o,N=n*L),b(me,ue)}}else L=o;s&&(Ue(".mbsc-cal-pnl",O).addClass("mbsc-cal-pnl-h"),We[ge].removeClass("mbsc-cal-pnl-h")),e.trigger("onCalResize"),q=!1},onHide:function(){Fe=[],Ie=[],ge=null,me=null,ue=null,_e=!0,L=0,J&&J.destroy(),lt&&$e&&Z&&($e.destroy(),Z.destroy())},onValidated:function(t){var a,s,n;if(s=e.getDate(!0),j)a="calendar";else for(n in e.order)n&&e.order[n]===t&&(a=/[mdy]/.test(n)?"date":"time");e.trigger("onSetDate",{date:s,control:a}),f(s),j=!1}}),H};var it=k.$,ot=k.presets.scroller,ct=k.util.datetime,rt=k.util,lt=rt.testTouch,dt={autoCorrect:!0,showSelector:!0,minRange:1,rangeTap:!0,fromText:"出發日",toText:"回程日"};k.presetShort("range"),ot.range=function(e){function t(e,t){e&&(e.setFullYear(t.getFullYear()),e.setMonth(t.getMonth()),e.setDate(t.getDate()))}function a(t){e._startDate=M=g,e._endDate=k=y,P.startInput&&(it(P.startInput).val(b),t&&it(P.startInput).trigger("change")),P.endInput&&(it(P.endInput).val(v),t&&it(P.endInput).trigger("change"))}function s(e,t){var a=!0;return e&&g&&y&&(y-g>P.maxRange-1&&(S?g=new Date(y-P.maxRange+1):y=new Date(+g+P.maxRange-1)),y-g<P.minRange-1&&(S?g=new Date(y-P.minRange+1):y=new Date(+g+P.minRange-1))),g&&y||(a=!1),t&&c(),a}function n(){return g&&y?Math.max(1,Math.round((new Date(y).setHours(0,0,0,0)-new Date(g).setHours(0,0,0,0))/864e5)+1):0}function i(e){e.addClass("mbsc-range-btn-sel").attr("aria-checked","true").find(".mbsc-range-btn").addClass(H)}function o(){D&&d&&(it(".mbsc-range-btn-c",d).removeClass("mbsc-range-btn-sel").removeAttr("aria-checked").find(".mbsc-range-btn",d).removeClass(H),i(it(".mbsc-range-btn-c",d).eq(S)))}function c(){var e,t,a,s,n,i=0,o=A||!S?" mbsc-cal-day-hl mbsc-cal-sel-start":" mbsc-cal-sel-start",c=A||S?" mbsc-cal-day-hl mbsc-cal-sel-end":" mbsc-cal-sel-end";if(b=g?ct.formatDate(u,g,P):"",v=y?ct.formatDate(u,y,P):"",d&&(it(".mbsc-range-btn-v-start",d).html(b||"&nbsp;"),it(".mbsc-range-btn-v-end",d).html(v||"&nbsp;"),e=g?new Date(g):null,a=y?new Date(y):null,!e&&a&&(e=new Date(a)),!a&&e&&(a=new Date(e)),n=S?a:e,it(".mbsc-cal-table .mbsc-cal-day-sel .mbsc-cal-day-i",d).removeClass(H),it(".mbsc-cal-table .mbsc-cal-day-hl",d).removeClass(O),it(".mbsc-cal-table .mbsc-cal-day-sel",d).removeClass("mbsc-cal-day-sel mbsc-cal-sel-start mbsc-cal-sel-end").removeAttr("aria-selected"),e&&a))for(t=e.setHours(0,0,0,0),s=a.setHours(0,0,0,0);a>=e&&i<84;)it('.mbsc-cal-day[data-full="'+n.getFullYear()+"-"+n.getMonth()+"-"+n.getDate()+'"]',d).addClass("mbsc-cal-day-sel"+(n.getTime()===t?o:"")+(n.getTime()===s?c:"")).attr("aria-selected","true").find(".mbsc-cal-day-i ").addClass(H),n.setDate(n.getDate()+(S?-1:1)),i++}function r(e,t){return{h:e?e.getHours():t?23:0,i:e?e.getMinutes():t?59:0,s:e?e.getSeconds():t?59:0}}var l,d,m,u,h,f,p,b,v,g,_,y,w,x,C,T,D,M=e._startDate,k=e._endDate,S=0,V=new Date,Y=it.extend({},e.settings),P=it.extend(e.settings,dt,Y),$=P.anchor,A=P.rangeTap,H=P.activeClass||"",E="mbsc-fr-btn-d "+(P.disabledClass||""),O="mbsc-cal-day-hl",I=null===P.defaultValue?[]:P.defaultValue||[new Date(V.setHours(0,0,0,0)),new Date(V.getFullYear(),V.getMonth(),V.getDate()+6,23,59,59,999)];return A&&(P.tabs=!0),h=ot.calbase.call(this,e),l=it.extend({},h),u=e.format,x="time"===P.controls.join(""),D=1!=P.controls.length||"calendar"!=P.controls[0]||P.showSelector,P.startInput&&(C=it(P.startInput).prop("readonly"),e.attachShow(it(P.startInput).prop("readonly",!0),function(){S=0,P.anchor=$||it(P.startInput)})),P.endInput&&(T=it(P.endInput).prop("readonly"),e.attachShow(it(P.endInput).prop("readonly",!0),function(){S=1,P.anchor=$||it(P.endInput)})),e.setVal=function(t,a,s,n,i){var o=t||[],c=t;(void 0===o[0]||null===o[0]||o[0].getTime)&&(p=!0,g=o[0]||null,b=g?ct.formatDate(u,g,P):"",S||(c=l.parseValue(b,e))),(void 0===o[1]||null===o[1]||o[1].getTime)&&(p=!0,y=o[1]||null,v=y?ct.formatDate(u,y,P):"",S&&(c=l.parseValue(v,e))),n||(e._startDate=M=g,e._endDate=k=y),e._setVal(c,a,s,n,i)},e.getVal=function(t){return t?[g,y]:e._hasValue?[M,k]:null},e.getDayProps=function(e){var t=g?new Date(g.getFullYear(),g.getMonth(),g.getDate()):null,a=y?new Date(y.getFullYear(),y.getMonth(),y.getDate()):null;return{selected:t&&a&&e>=t&&e<=y,cssClass:((A||!S)&&t&&t.getTime()===e.getTime()||(A||S)&&a&&a.getTime()===e.getTime()?O:"")+(t&&t.getTime()===e.getTime()?" mbsc-cal-sel-start":"")+(a&&a.getTime()===e.getTime()?" mbsc-cal-sel-end":"")}},e.setActiveDate=function(t){var a;S="start"==t?0:1,a="start"==t?g:y,e.isVisible()&&(o(),A||(it(".mbsc-cal-table .mbsc-cal-day-hl",d).removeClass(O),a&&it('.mbsc-cal-day[data-full="'+a.getFullYear()+"-"+a.getMonth()+"-"+a.getDate()+'"]',d).addClass(O)),a&&(f=!0,e.setDate(a,!1,1e3,!0)))},e.getValue=e.getVal,it.extend(h,{highlight:!1,outerMonthChange:!1,formatValue:function(){return b+(P.endInput?"":v?" - "+v:"")},parseValue:function(t){var a=t?t.split(" - "):[];return P.defaultValue=I[1],k=P.endInput?it(P.endInput).val()?ct.parseDate(u,it(P.endInput).val(),P):I[1]:a[1]?ct.parseDate(u,a[1],P):I[1],P.defaultValue=I[0],M=P.startInput?it(P.startInput).val()?ct.parseDate(u,it(P.startInput).val(),P):I[0]:a[0]?ct.parseDate(u,a[0],P):I[0],P.defaultValue=I[S],b=M?ct.formatDate(u,M,P):"",v=k?ct.formatDate(u,k,P):"",e._startDate=M,e._endDate=k,l.parseValue(S?v:b,e)},onFill:function(e){a(e.change)},onBeforeClose:function(t){if("set"===t.button&&!s(!0,!0))return e.setActiveDate(S?"start":"end"),!1},onHide:function(){l.onHide.call(e),S=0,d=null,P.anchor=$},onClear:function(){A&&(S=0)},onBeforeShow:function(){P.headerText=!1,g=M,y=k,_=r(g,0),w=r(y,1),P.counter&&(P.headerText=function(){var e=n();return(e>1?P.selectedPluralText||P.selectedText:P.selectedText).replace(/{count}/,e)}),p=!0},onMarkupReady:function(t){var a;g&&(f=!0,e.setDate(g,!1,0,!0),g=e.getDate(!0)),y&&(f=!0,e.setDate(y,!1,0,!0),y=e.getDate(!0)),(S&&y||!S&&g)&&(f=!0,e.setDate(S?y:g,!1,0,!0)),c(),l.onMarkupReady.call(this,t),d=it(t.target),d.addClass("mbsc-range"),D&&(a='<div class="mbsc-range-btn-t" role="radiogroup"><div class="mbsc-range-btn-c mbsc-range-btn-start"><div role="radio" class="mbsc-fr-btn-e mbsc-fr-btn-nhl mbsc-range-btn">'+P.fromText+'<div class="mbsc-range-btn-v mbsc-range-btn-v-start">'+(b||"&nbsp;")+'</div></div></div><div class="mbsc-range-btn-c mbsc-range-btn-end"><div role="radio" class="mbsc-fr-btn-e mbsc-fr-btn-nhl mbsc-range-btn">'+P.toText+'<div class="mbsc-range-btn-v mbsc-range-btn-v-end">'+(v||"&nbsp;")+"</div></div></div></div>",it(".mbsc-cal-tabs",d).before(a),o()),it(".mbsc-range-btn-c",d).on("touchstart click",function(t){lt(t,this)&&(e.showMonthView(),e.setActiveDate(it(this).index()?"end":"start"))})},onDayChange:function(e){e.active=S?"end":"start",m=!0},onSetDate:function(a){var n=a.date,i=e.order;f||(void 0===i.h&&n.setHours(S?23:0),void 0===i.i&&n.setMinutes(S?59:0),void 0===i.s&&n.setSeconds(S?59:0),n.setMilliseconds(S?999:0),p&&!m||(A&&m&&(1==S&&n<g&&(S=0),S?n.setHours(w.h,w.i,w.s,999):n.setHours(_.h,_.i,_.s,0)),S?(y=new Date(n),w=r(y)):(g=new Date(n),_=r(g)),x&&(t(g,n),t(y,n)),A&&m&&!S&&(y=null))),e._isValid=s(p||m||P.autoCorrect,!f),a.active=S?"end":"start",!f&&A&&(m&&(S=S?0:1),o()),e.isVisible()&&(e._isValid?it(".mbsc-fr-btn-s .mbsc-fr-btn",e._markup).removeClass(E):it(".mbsc-fr-btn-s .mbsc-fr-btn",e._markup).addClass(E)),m=!1,p=!1,f=!1},onTabChange:function(t){"calendar"!=t.tab&&e.setDate(S?y:g,!1,1e3,!0),s(!0,!0)},onDestroy:function(){it(P.startInput).prop("readonly",C),it(P.endInput).prop("readonly",T)}}),h};var mt=k.$,ut=k.classes,ht=function(e,t){var a="",s=mt(e),n=this,i=n.settings;ut.Base.call(this,e,t,!0),n._init=function(){var e=i.context,t=mt(e),n=t.find(".mbsc-ms-top .mbsc-ms"),o=t.find(".mbsc-ms-bottom .mbsc-ms"),c={};"body"==e?mt("body,html").addClass("mbsc-page-ctx"):t.addClass("mbsc-page-ctx"),a&&s.removeClass(a),n.length&&(c.paddingTop=n[0].offsetHeight),o.length&&(c.paddingBottom=o[0].offsetHeight),a="mbsc-page mbsc-"+i.theme+(i.baseTheme?" mbsc-"+i.baseTheme:"")+(i.rtl?" mbsc-rtl":" mbsc-ltr"),s.addClass(a).css(c)},n._destroy=function(){s.removeClass(a)},i=n.settings,n.init(t)};ht.prototype={_hasDef:!0,_hasTheme:!0,_hasLang:!0,_class:"page",_defaults:{context:"body"}},ut.Page=ht,k.themes.page.mobiscroll={},k.presetShort("page","Page"),mt(function(){var e="[mbsc-page]";mt(e).each(function(){new ut.Page(this)}),mt(document).on("mbsc-enhance",function(t,a){mt(t.target).is(e)?new ut.Page(t.target,a):mt(e,t.target).each(function(){new ut.Page(this,a)})})});var ft=k.$,pt=function(e,t,a){function s(e){ft(".mbsc-fr-c",e).hasClass("mbsc-wdg-c")||(ft(".mbsc-fr-c",e).addClass("mbsc-wdg-c").append(c.show()),ft(".mbsc-w-p",e).length||ft(".mbsc-fr-c",e).addClass("mbsc-w-p"))}var n,i,o,c=ft(e),r=this;pe.call(this,e,t,!0),r._generateContent=function(){return""},r._markupReady=function(e){"inline"!=n.display&&s(e)},r._markupInserted=function(e){"inline"==n.display&&s(e),e.trigger("mbsc-enhance",[{theme:n.theme,lang:n.lang}])},r._markupRemove=function(){c.hide(),i?i.prepend(c):o.after(c)},r.__processSettings=function(){n=r.settings,r.buttons.ok={text:n.okText,icon:n.okIcon,handler:"set"},n.buttons=n.buttons||("inline"==n.display?[]:["ok"]),i||o||(o=c.prev(),o.length||(i=c.parent())),c.hide()},r.__init=function(){n.cssClass=(n.cssClass||"")+" mbsc-wdg"},a||r.init(t)};pt.prototype={_hasDef:!0,_hasTheme:!0,_hasContent:!0,_class:"widget",_defaults:ft.extend({},pe.prototype._defaults,{okText:"OK",headerText:!1})},k.classes.Widget=pt,k.themes.widget=k.themes.frame,k.presetShort("widget","Widget",!1);var bt=!!window.Promise,vt=[],gt=[],_t=k.$,yt=_t.extend;k.alert=function(e){var t=document.createElement("div");return t.innerHTML=u(e),g(h,t,e)},k.confirm=function(e){var t=document.createElement("div");return t.innerHTML=u(e),g(f,t,e)},k.prompt=function(e){var t=document.createElement("div");return t.innerHTML=u(e)+'<label class="mbsc-input">'+(e.label?'<span class="mbsc-label">'+e.label+"</span>":"")+'<input type="'+(e.inputType||"text")+'" placeholder="'+(e.placeholder||"")+'" value="'+(e.value||"")+'"></label>',g(p,t,e)},k.snackbar=function(e){var t=document.createElement("div");return t.innerHTML='<div class="mbsc-snackbar-cont"><div class="mbsc-snackbar-msg">'+(e.message||"")+"</div>"+(e.button?'<button class="mbsc-snackbar-btn mbsc-btn mbsc-btn-flat">'+(e.button.text||"")+"</button>":"")+"</div>",g(b,t,e)},k.toast=function(e){var t=document.createElement("div");return t.innerHTML='<div class="mbsc-toast-msg">'+(e.message||"")+"</div>",g(v,t,e)};var wt=k.$,xt=k.$,Ct=xt.extend,Tt=k.util,Dt=Tt.getCoord,Mt=Tt.testTouch,kt=["touchstart","touchmove","touchend","touchcancel","mousedown","mousemove","mouseup","mouseleave"],St={tap:!0},Vt=void 0,Yt=function(){function e(t,a){var s=this;V(this,e);var n=Ct({},St,a),i=xt(t),o=i.parent(),c=i.next().hasClass("mbsc-fr")?i.next():null,r=x(i);c&&c.insertAfter(o),w(o,r),i.addClass("mbsc-control"),kt.forEach(function(e){t.addEventListener(e,s)}),this.settings=n,this._type=r,this._elm=t,this._$elm=i,this._$parent=o,this._$frame=c,this._ripple=C(n.theme)}return Y(e,[{key:"destroy",value:function(){var e=this;this._$elm.removeClass("mbsc-control"),kt.forEach(function(t){e._elm.removeEventListener(t,e)})}},{key:"option",value:function(e){Ct(this.settings,e),this._ripple=C(this.settings.theme)}},{key:"handleEvent",value:function(e){switch(e.type){case"touchstart":case"mousedown":this._onStart(e);break;case"touchmove":case"mousemove":this._onMove(e);break;case"touchend":case"touchcancel":case"mouseup":case"mouseleave":this._onEnd(e)}}},{key:"_addRipple",value:function(e){this._ripple&&this._$rippleElm&&this._ripple.addRipple(this._$rippleElm,e)}},{key:"_removeRipple",value:function(){this._ripple&&this._$rippleElm&&this._ripple.removeRipple()}},{key:"_onStart",value:function(e){var t=this._elm;Mt(e,t)&&(this._startX=Dt(e,"X"),this._startY=Dt(e,"Y"),Vt&&Vt.removeClass("mbsc-active"),t.disabled||(this._isActive=!0,Vt=this._$elm,Vt.addClass("mbsc-active"),this._addRipple(e)))}},{key:"_onMove",value:function(e){(this._isActive&&Math.abs(Dt(e,"X")-this._startX)>9||Math.abs(Dt(e,"Y")-this._startY)>9)&&(this._$elm.removeClass("mbsc-active"),this._removeRipple(),this._isActive=!1)}},{key:"_onEnd",value:function(e){var t=this,a=this._elm,s=this._type;if(this._isActive&&this.settings.tap&&"touchend"==e.type&&!a.readOnly&&(a.focus(),/(button|submit|checkbox|switch|radio)/.test(s)&&e.preventDefault(),!/select/.test(s))){var n=(e.originalEvent||e).changedTouches[0],i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),i.tap=!0,a.mbscChange=!0,a.dispatchEvent(i),Tt.preventClick()}this._isActive&&setTimeout(function(){t._$elm.removeClass("mbsc-active"),t._removeRipple()},100),this._isActive=!1,Vt=null}}]),e}(),Pt=function(e){function t(e){V(this,t);var a=A(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return y(a,a._$elm),a._$parent.addClass("mbsc-input"),a}return $(t,e),Y(t,[{key:"destroy",value:function(){P(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this._$parent.find(".mbsc-input-wrap").before(this._$elm).remove()}}]),t}(Yt),$t=function(e){function t(e,a){V(this,t);var s=A(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a)),n=s._$elm,i=n.attr("data-icon");return n.addClass("mbsc-btn").find(".mbsc-btn-ic").remove(),i&&(n.prepend('<span class="mbsc-btn-ic mbsc-ic mbsc-ic-'+i+'"></span>'),""===n.text()&&n.addClass("mbsc-btn-icon-only")),s._$rippleElm=n,s}return $(t,e),t}(Yt),At=function(e){function t(e){V(this,t);var a=A(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a._$parent.prepend(a._$elm).addClass("mbsc-checkbox mbsc-control-w").find(".mbsc-checkbox-box").remove(),a._$elm.after('<span class="mbsc-checkbox-box"></span>'),a}return $(t,e),t}(Yt),Ht=function(e){function t(e){V(this,t);var a=A(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a._$parent.addClass("mbsc-radio mbsc-control-w").find(".mbsc-radio-box").remove(),a._$elm.after('<span class="mbsc-radio-box"><span></span></span>'),a}return $(t,e),t}(Yt),Et=k.$,Ot=function(e){function t(e){V(this,t);var a=A(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),s=a._$elm,n=a._$parent,i=n.find("input.mbsc-control"),o=i.length?i:Et('<input tabindex="-1" class="mbsc-control" readonly>');return a._$input=o,n.addClass("mbsc-select"+(a._$frame?" mbsc-select-inline":"")),s.after(o),o.after('<span class="mbsc-select-ic mbsc-ic mbsc-ic-arrow-down5"></span>'),o.hasClass("mbsc-comp")||(e.addEventListener("change",a),a._setText()),a}return $(t,e),Y(t,[{key:"destroy",value:function(){P(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this._$elm.after(this._$input),this._elm.removeEventListener("change",this)}},{key:"handleEvent",value:function(e){P(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleEvent",this).call(this,e),"change"==e.type&&this._setText()}},{key:"_setText",value:function(){var e=this._elm;this._$input.val(e.selectedIndex!=-1?e.options[e.selectedIndex].text:"")}}]),t}(Pt),It=k.$,Ft=["keydown","input","scroll"],Wt=void 0;It(window).on("resize orientationchange",T);var Lt=function(e){function t(e){V(this,t);var a=A(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a._$parent.addClass("mbsc-textarea"),Ft.forEach(function(e){a._elm.addEventListener(e,a)}),D(e),a}return $(t,e),Y(t,[{key:"destroy",value:function(){var e=this;P(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),Ft.forEach(function(t){e._elm.removeEventListener(t,e)})}},{key:"handleEvent",value:function(e){switch(P(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleEvent",this).call(this,e),e.type){case"keydown":case"input":this._onInput(e);break;case"scroll":M(this._elm)}}},{key:"_onInput",value:function(){var e=this;clearTimeout(this._debounce),this._debounce=setTimeout(function(){D(e._elm)},100)}}]),t}(Pt),Nt=k.$,jt=function(e){function t(e,a){V(this,t);var s=A(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a)),n=void 0,i=void 0,o=s._$elm,c=s._$parent;return c.hasClass("mbsc-segmented-item")||(n=Nt('<div class="mbsc-segmented"></div>'),c.after(n),c.parent().find('input[name="'+o.attr("name")+'"]').each(function(){var e=Nt(this);i=e.parent().addClass("mbsc-segmented-item"),Nt('<span class="mbsc-segmented-content">'+(e.attr("data-icon")?' <span class="mbsc-ic mbsc-ic-'+e.attr("data-icon")+'"></span> ':"")+"</span>").append(i.contents()).appendTo(i),i.prepend(e),n.append(i)})),s._$rippleElm=o.next(),s}return $(t,e),t}(Yt),Xt=k.$,Rt=k.util,qt=Rt.getCoord,Bt=Rt.testTouch,zt=function(e,t){function a(t){32==t.keyCode&&(t.preventDefault(),b||e.disabled||(u=Xt(this).addClass("mbsc-active"),l(t)))}function s(e){b&&(e.preventDefault(),d(!0))}function n(t){Bt(t,this)&&!e.disabled&&(u=Xt(this).addClass("mbsc-active").trigger("focus"),M&&!u.hasClass("mbsc-step-disabled")&&M.addRipple(u.find(".mbsc-segmented-content"),t),l(t),"mousedown"===t.type&&Xt(document).on("mousemove",o).on("mouseup",i))}function i(e){b&&(e.preventDefault(),d(!0,e),"mouseup"===e.type&&Xt(document).off("mousemove",o).off("mouseup",i))}function o(e){b&&(w=qt(e,"X"),x=qt(e,"Y"),g=w-Y,_=x-P,(Math.abs(g)>7||Math.abs(_)>7)&&d())}function c(){var t;e.disabled||(t=parseFloat(Xt(this).val()),r(isNaN(t)?A:t))}function r(e,t,a){F=A,void 0===t&&(t=!0),void 0===a&&(a=t),A=void 0!==e?Math.min(T,Math.max(Math.round(e/S)*S,D)):Math.min(T,Math.max(A+(u.hasClass("mbsc-stepper-minus")?-S:S),D)),v=!0,p.removeClass("mbsc-step-disabled"),t&&I.val(A),A==D?f.addClass("mbsc-step-disabled"):A==T&&h.addClass("mbsc-step-disabled"),A!==F&&a&&I.trigger("change")}function l(e){b||(b=!0,v=!1,Y=qt(e,"X"),P=qt(e,"Y"),clearInterval(C),clearTimeout(C),C=setTimeout(function(){r(),C=setInterval(function(){r()},150)},300))}function d(e){clearInterval(C),clearTimeout(C),!v&&e&&r(),b=!1,v=!1,u.removeClass("mbsc-active"),M&&setTimeout(function(){M.removeRipple()},100)}function m(e,t){var a=I.attr(e);return void 0===a||""===a?t:+a}var u,h,f,p,b,v,g,_,y,w,x,C,T,D,M,S,V,Y,P,$,A,H,E,O=this,I=Xt(e),F=A;k.classes.Base.call(this,e,t,!0),O.getVal=function(){var e=parseFloat(I.val());return e=isNaN(e)?A:e,Math.min(T,Math.max(Math.round(e/S)*S,D))},O.setVal=function(e,t,a){e=parseFloat(e),r(isNaN(e)?A:e,t,a)},O._init=function(r){H=I.parent().hasClass("mbsc-stepper"),E=H?I.closest(".mbsc-stepper-cont"):I.parent(),V=O.settings,D=void 0===r.min?m("min",V.min):r.min,T=void 0===r.max?m("max",V.max):r.max,S=void 0===r.step?m("step",V.step):r.step,y=I.attr("data-val")||V.val,A=Math.min(T,Math.max(Math.round(+e.value/S)*S||0,D)),$=k.themes.form[t.theme],M=$&&$.addRipple?$:null,H||E.addClass("mbsc-stepper-cont mbsc-control-w").append('<span class="mbsc-segmented mbsc-stepper"></span>').find(".mbsc-stepper").append('<span class="mbsc-segmented-item mbsc-stepper-control mbsc-stepper-minus '+(A==D?"mbsc-step-disabled":"")+'"  tabindex="0"><span class="mbsc-segmented-content"><span class="mbsc-ic mbsc-ic-minus"></span></span></span>').append('<span class="mbsc-segmented-item mbsc-stepper-control mbsc-stepper-plus '+(A==T?"mbsc-step-disabled":"")+'"  tabindex="0"><span class="mbsc-segmented-content"> <span class="mbsc-ic mbsc-ic-plus"></span> </span></span>').prepend(I),
f=Xt(".mbsc-stepper-minus",E),h=Xt(".mbsc-stepper-plus",E),H||("left"==y?(E.addClass("mbsc-stepper-val-left"),I.after('<span class="mbsc-segmented-item"><span class="mbsc-segmented-content"></span></span>')):"right"==y?(E.addClass("mbsc-stepper-val-right"),h.after('<span class="mbsc-segmented-item"><span class="mbsc-segmented-content"></span></span>')):f.after('<span class="mbsc-segmented-item"><span class="mbsc-segmented-content mbsc-stepper-val"></span></span>')),I.val(A).attr("data-role","stepper").attr("min",D).attr("max",T).attr("step",S).on("change",c),p=Xt(".mbsc-stepper-control",E).on("keydown",a).on("keyup",s).on("mousedown touchstart",n).on("touchmove",o).on("touchend touchcancel",i),I.addClass("mbsc-stepper-ready mbsc-control")},O._destroy=function(){I.removeClass("mbsc-control").off("change",c),p.off("keydown",a).off("keyup",s).off("mousedown touchstart",n).off("touchmove",o).off("touchend touchcancel",i)},O.init(t)};zt.prototype={_class:"stepper",_defaults:{min:0,max:100,step:1}},k.classes.Stepper=zt,k.presetShort("stepper","Stepper");var Ut=function(){},Gt=k.$,Jt=function(e,t,a){var s,n,i,o,c=this;k.classes.Base.call(this,e,t,!0),c.__init=Ut,c.__destroy=Ut,c._init=function(t){var a;o=c.settings,s=Gt(e),a=!!n,n=c._$parent=a?n:s.parent(),i&&n.removeClass(i),i=c._css+" mbsc-progress-w mbsc-control-w mbsc-"+o.theme+(o.baseTheme?" mbsc-"+o.baseTheme:"")+(o.rtl?" mbsc-rtl":" mbsc-ltr"),n.addClass(i),s.addClass("mbsc-control"),c.__init(t),a||c._attachChange(),c.refresh()},c._destroy=function(){c.__destroy(),n.removeClass(i),s.removeClass("mbsc-control")},a||c.init(t)};Jt.prototype={_class:"progressbase"};var Zt=function(){},Kt=k.$,Qt=k.util,ea=Qt.getCoord,ta=Qt.testTouch,aa=function(e,t,a){function s(t){!ta(t,this)||C||e.disabled||(F.stopProp&&t.stopPropagation(),C=!0,E=!1,T=!1,L=ea(t,"X"),N=ea(t,"Y"),S=L,x.removeClass("mbsc-progress-anim"),v=O?Kt(".mbsc-slider-handle",this):_,g&&g.removeClass("mbsc-handle-curr"),g=v.parent().addClass("mbsc-active mbsc-handle-curr"),Y=+v.attr("data-index"),R=x[0].offsetWidth,k=x[0].getBoundingClientRect().left,"mousedown"===t.type&&(t.preventDefault(),Kt(document).on("mousemove",n).on("mouseup",i)))}function n(e){C&&(S=ea(e,"X"),V=ea(e,"Y"),D=S-L,M=V-N,(Math.abs(D)>5||E)&&(E=!0,Math.abs(z-new Date)>50&&(z=new Date,h(S,F.round,$))),E?e.preventDefault():Math.abs(M)>7&&u(e))}function i(e){C&&(e.preventDefault(),O||x.addClass("mbsc-progress-anim"),h(S,!0,!0),E||T||("touchend"==e.type&&Qt.preventClick(),B._onTap(q[Y])),u())}function o(){C&&u()}function c(){var e=B._readValue(Kt(this)),t=+Kt(this).attr("data-index");e!==q[t]&&(q[t]=e,p(e,t))}function r(e){e.stopPropagation()}function l(e){e.preventDefault()}function d(t){var a;if(!e.disabled){switch(t.keyCode){case 38:case 39:a=1;break;case 40:case 37:a=-1}a&&(t.preventDefault(),X||(Y=+Kt(this).attr("data-index"),p(q[Y]+I*a,Y,!0),X=setInterval(function(){p(q[Y]+I*a,Y,!0)},200)))}}function m(e){e.preventDefault(),clearInterval(X),X=null}function u(){C=!1,g.removeClass("mbsc-active"),Kt(document).off("mousemove",n).off("mouseup",i)}function h(e,t,a){var s=t?Math.min(Math.round(Math.max(100*(e-k)/R,0)/W/I)*I*100/(A-H),100):Math.max(0,Math.min(100*(e-k)/R,100));P&&(s=100-s),p(Math.round((H+s/W)*j)/j,Y,a,s)}function f(e){return 100*(e-H)/(A-H)}function p(e,t,a,s,n,i){var o=_.eq(t),c=o.parent();e=Math.min(A,Math.max(e,H)),void 0===i&&(i=a),B._update?B._update(e,q,t,s,O,n,c):c.css({left:P?"auto":(s||f(e))+"%",right:P?(s||f(e))+"%":"auto"}),e>H?c.removeClass("mbsc-slider-start"):(q[t]>H||n)&&c.addClass("mbsc-slider-start"),a&&q[t]!=e&&(T=!0,q[t]=e,B._fillValue(e,t,i)),o.attr("aria-valuenow",e)}var b,v,g,_,y,w,x,C,T,D,M,k,S,V,Y,P,$,A,H,E,O,I,F,W,L,N,j,X,R,q,B=this,z=new Date;Jt.call(this,e,t,!0),B._onTap=Zt,B.___init=Zt,B.___destroy=Zt,B._attachChange=function(){b.on(F.changeEvent,c)},B.__init=function(e){var t;_&&(t=!0,_.parent().remove()),B.___init(e),w=B._$parent,x=B._$track,b=w.find("input"),F=B.settings,H=B._min,A=B._max,I=B._step,$=B._live,j=I%1!==0?100/(100*+(I%1).toFixed(2)):1,W=100/(A-H)||100,O=b.length>1,P=F.rtl,q=[],b.each(function(e){q[e]=B._readValue(Kt(this)),Kt(this).attr("data-index",e)}),_=w.find(".mbsc-slider-handle"),y=w.find(O?".mbsc-slider-handle-cont":".mbsc-progress-cont"),_.on("keydown",d).on("keyup",m).on("blur",m),y.on("touchstart mousedown",s).on("touchmove",n).on("touchend touchcancel",i).on("pointercancel",o),t||(b.on("click",r),w.on("click",l))},B.__destroy=function(){w.off("click",l),b.off(F.changeEvent,c).off("click",r),_.off("keydown",d).off("keyup",m).off("blur",m),y.off("touchstart mousedown",s).off("touchmove",n).off("touchend touchcancel",i).off("pointercancel",o),B.___destroy()},B.refresh=function(){b.each(function(e){p(B._readValue(Kt(this)),e,!0,!1,!0,!1)})},B.getVal=function(){return O?q.slice(0):q[0]},B.setVal=B._setVal=function(e,t,a){Kt.isArray(e)||(e=[e]),Kt.each(e,function(e,t){p(t,e,!0,!1,!0,a)})},a||B.init(t)};aa.prototype={_class:"sliderbase"};var sa=k.$,na=function(e,t){var a,s,n,i,o=this;t=t||{},sa.extend(t,{changeEvent:"click",round:!1}),aa.call(this,e,t,!0),o._readValue=function(){return e.checked?1:0},o._fillValue=function(e,t,s){a.prop("checked",!!e),s&&a.trigger("change")},o._onTap=function(e){o._setVal(e?0:1)},o.___init=function(){n=o.settings,a=sa(e),s=a.parent(),s.find(".mbsc-switch-track").remove(),s.prepend(a),a.attr("data-role","switch").after('<span class="mbsc-progress-cont mbsc-switch-track"><span class="mbsc-progress-track mbsc-progress-anim"><span class="mbsc-slider-handle-cont"><span class="mbsc-slider-handle mbsc-switch-handle" data-index="0"><span class="mbsc-switch-txt-off">'+n.offText+'</span><span class="mbsc-switch-txt-on">'+n.onText+"</span></span></span></span></span>"),i=new Yt(e),o._$track=s.find(".mbsc-progress-track"),o._min=0,o._max=1,o._step=1},o.___destroy=function(){i.destroy()},o.getVal=function(){return e.checked},o.setVal=function(e,t,a){o._setVal(e?1:0,t,a)},o.init(t)};na.prototype={_class:"switch",_css:"mbsc-switch",_hasTheme:!0,_hasLang:!0,_defaults:{stopProp:!0,offText:"Off",onText:"On"}},k.classes.Switch=na,k.presetShort("switch","Switch");var ia=k.$,oa=function(e,t,a){function s(){var e=n("value",u);e!==b&&i(e)}function n(e,t){var a=c.attr(e);return void 0===a||""===a?t:+a}function i(e,t,a,s){e=Math.min(h,Math.max(e,u)),l.css("width",100*(e-u)/(h-u)+"%"),void 0===a&&(a=!0),void 0===s&&(s=a),(e!==b||t)&&g._display(e),e!==b&&(b=e,a&&c.attr("value",b),s&&c.trigger("change"))}var o,c,r,l,d,m,u,h,f,p,b,v,g=this;Jt.call(this,e,t,!0),g._display=function(e){v=p&&f.returnAffix?p.replace(/\{value\}/,e).replace(/\{max\}/,h):e,d&&d.html(v),o&&o.html(v)},g._attachChange=function(){c.on("change",s)},g.__init=function(t){var a,s,i,v;if(f=g.settings,c=ia(e),v=!!r,r=g._$parent,u=g._min=void 0===t.min?n("min",f.min):t.min,h=g._max=void 0===t.max?n("max",f.max):t.max,b=n("value",u),a=c.attr("data-val")||f.val,i=c.attr("data-step-labels"),i=i?JSON.parse(i):f.stepLabels,p=c.attr("data-template")||(100!=h||f.template?f.template:"{value}%"),v?(a&&(o.remove(),r.removeClass("mbsc-progress-value-"+("right"==a?"right":"left"))),i&&ia(".mbsc-progress-step-label",m).remove()):(w(r),_(c),r.find(".mbsc-input-wrap").append('<span class="mbsc-progress-cont"><span class="mbsc-progress-track mbsc-progress-anim"><span class="mbsc-progress-bar"></span></span></span>'),l=g._$progress=r.find(".mbsc-progress-bar"),m=g._$track=r.find(".mbsc-progress-track")),c.attr("min",u).attr("max",h),a&&(o=ia('<span class="mbsc-progress-value"></span>'),r.addClass("mbsc-progress-value-"+("right"==a?"right":"left")).find(".mbsc-input-wrap").append(o)),i)for(s=0;s<i.length;++s)m.append('<span class="mbsc-progress-step-label" style="'+(f.rtl?"right":"left")+": "+100*(i[s]-u)/(h-u)+'%" >'+i[s]+"</span>");d=ia(c.attr("data-target")||f.target)},g.__destroy=function(){r.find(".mbsc-progress-cont").remove(),r.find(".mbsc-input-wrap").before(c).remove(),c.off("change",s)},g.refresh=function(){i(n("value",u),!0,!1)},g.getVal=function(){return b},g.setVal=function(e,t,a){i(e,!0,t,a)},a||g.init(t)};oa.prototype={_class:"progress",_css:"mbsc-progress",_hasTheme:!0,_hasLang:!0,_defaults:{min:0,max:100,returnAffix:!0}},k.classes.Progress=oa,k.presetShort("progress","Progress");var ca=k.$,ra=function(e,t,a){function s(e){return 100*(e-p)/(f-p)}function n(e,t){var a=i.attr(e);return void 0===a||""===a?t:"true"===a}var i,o,c,r,l,d,m,u,h,f,p,b,v,g=this;oa.call(this,e,t,!0);var _=g.__init,y=g.__destroy;aa.call(this,e,t,!0);var w=g.__init,x=g.__destroy;g.__init=function(e){_(e),w(e)},g.__destroy=function(){y(),x()},g._update=function(e,t,a,n,i,o,l){u?0===a?(e=Math.min(e,t[1]),c.css({width:s(t[1])-s(e)+"%",left:h?"auto":s(e)+"%",right:h?s(e)+"%":"auto"})):(e=Math.max(e,t[0]),c.css({width:s(e)-s(t[0])+"%"})):i||!d?l.css({left:h?"auto":(n||s(e))+"%",right:h?(n||s(e))+"%":"auto"}):c.css("width",(n||s(e))+"%"),m&&r.eq(a).html(e),i||t[a]==e&&!o||g._display(e)},g._readValue=function(e){return+e.val()},g._fillValue=function(e,t,a){i.eq(t).val(e),a&&i.eq(t).trigger("change")},g.___init=function(e){var t,a;if(o&&(o.removeClass("mbsc-slider-has-tooltip"),1!=b&&ca(".mbsc-slider-step",l).remove()),o=g._$parent,l=g._$track,c=g._$progress,i=o.find("input"),v=g.settings,p=g._min,f=g._max,g._step=b=void 0===e.step?+i.attr("step")||v.step:e.step,g._live=n("data-live",v.live),m=n("data-tooltip",v.tooltip),d=n("data-highlight",v.highlight)&&i.length<3,u=d&&2==i.length,h=v.rtl,m&&o.addClass("mbsc-slider-has-tooltip"),1!=b)for(a=(f-p)/b,t=0;t<=a;++t)l.append('<span class="mbsc-slider-step" style="'+(h?"right":"left")+":"+100/a*t+'%"></span>');i.each(function(e){"range"==this.type&&ca(this).attr("min",p).attr("max",f).attr("step",b),(d?c:l).append('<span class="mbsc-slider-handle-cont'+(u&&!e?" mbsc-slider-handle-left":"")+'"><span tabindex="0" class="mbsc-slider-handle" aria-valuemin="'+p+'" aria-valuemax="'+f+'" data-index="'+e+'"></span>'+(m?'<span class="mbsc-slider-tooltip"></span>':"")+"</span>")}),r=o.find(".mbsc-slider-tooltip")},a||g.init(t)};ra.prototype={_class:"progress",_css:"mbsc-progress mbsc-slider",_hasTheme:!0,_hasLang:!0,_defaults:{changeEvent:"change",stopProp:!0,min:0,max:100,step:1,live:!0,highlight:!0,round:!0,returnAffix:!0}},k.classes.Slider=ra,k.presetShort("slider","Slider");var la=0,da=k.$,ma=k.classes,ua=k.instances,ha=function(e,t){function a(){o.removeClass("mbsc-no-touch")}var s,n,i="",o=da(e),c={},r=this;ma.Base.call(this,e,t,!0),r.refresh=function(e){da("input,select,textarea,progress,button",o).each(function(){var e=this,t=da(e),a=x(t);if("false"!=t.attr("data-enhance"))if(t.hasClass("mbsc-control"))c[e.id]&&c[e.id].option({theme:s.theme,lang:s.lang,rtl:s.rtl,onText:s.onText,offText:s.offText,stopProp:s.stopProp});else switch(e.id||(e.id="mbsc-form-control-"+ ++la),a){case"button":case"submit":c[e.id]=new $t(e,{theme:s.theme,tap:s.tap});break;case"switch":c[e.id]=new na(e,{theme:s.theme,lang:s.lang,rtl:s.rtl,onText:s.onText,offText:s.offText,stopProp:s.stopProp});break;case"checkbox":c[e.id]=new At(e,{tap:s.tap});break;case"range":da(e).parent().hasClass("mbsc-slider")||(c[e.id]=new ra(e,{theme:s.theme,lang:s.lang,rtl:s.rtl,stopProp:s.stopProp}));break;case"progress":c[e.id]=new oa(e,{theme:s.theme,lang:s.lang,rtl:s.rtl});break;case"radio":c[e.id]=new Ht(e,{tap:s.tap});break;case"select":case"select-one":case"select-multiple":c[e.id]=new Ot(e,{tap:s.tap});break;case"textarea":c[e.id]=new Lt(e,{tap:s.tap});break;case"segmented":c[e.id]=new jt(e,{theme:s.theme,tap:s.tap});break;case"stepper":c[e.id]=new zt(e,{theme:s.theme});break;case"hidden":return;default:c[e.id]=new Pt(e,{tap:s.tap})}}),e||T()},r._init=function(){k.themes.form[s.theme]||(s.theme="mobiscroll"),o.hasClass("mbsc-form")||o.on("touchstart",a).show(),i&&o.removeClass(i),i="mbsc-form mbsc-no-touch mbsc-"+s.theme+(s.baseTheme?" mbsc-"+s.baseTheme:"")+(s.rtl?" mbsc-rtl":" mbsc-ltr"),o.addClass(i),r.refresh()},r._destroy=function(){o.removeClass(i).off("touchstart",a);for(var e in c)c[e].destroy()},s=r.settings,n=r.trigger,r.init(t)};ha.prototype={_hasDef:!0,_hasTheme:!0,_hasLang:!0,_class:"form",_defaults:{tap:!0,stopProp:!0,lang:"en"}},k.themes.form.mobiscroll={},k.classes.Form=ha,k.presetShort("form","Form"),da(function(){var e="[mbsc-enhance],[mbsc-form]";da(e).each(function(){new ha(this)}),da(document).on("mbsc-enhance",function(t,a){da(t.target).is(e)?new ha(t.target,a):da(e,t.target).each(function(){new ha(this,a)})}),da(document).on("mbsc-refresh",function(t){var a;da(t.target).is(e)?(a=ua[t.target.id],a&&a.refresh()):da(e,t.target).each(function(){a=ua[this.id],a&&a.refresh()})})}),k.customTheme("mobiscroll-dark","mobiscroll");var fa=k.themes,pa=k.$,ba=void 0;return"android"==L.name?ba=L.majorVersion>=5?"material":"android-holo":"ios"==L.name?ba="ios":"wp"==L.name&&(ba="wp"),k.setAutoTheme=function(){pa.each(fa.frame,function(e,t){return ba&&t.baseTheme==ba&&"android-holo-light"!=e&&"material-dark"!=e&&"wp-light"!=e&&"ios-dark"!=e?(k.autoTheme=e,!1):void(e==ba&&(k.autoTheme=e))})},k.setAutoTheme(),k.uid="9aa1b20a",k});
